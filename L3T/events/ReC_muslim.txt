#######################################################
# [ReC][Reliques et Cathédrales]  par Arko  et Mouchi #
#######################################################

namespace = REC

##Maintenance muslim jyzia /character version
# ROOT is the character
#jyzia modifier character version
character_event = {
    id = REC.30
	hide_window = yes
	
	only_rulers = yes

	is_triggered_only = yes
	
	trigger = {}
	
	immediate = {
		if = {
			limit = {
				religion_group = muslim
				NOR = { 
					is_tribal = yes
					is_nomadic = yes
				}				
				any_demesne_title = {
					location = {
						OR = {
							religion_group = christian
							religion_group = jewish_group
						}
					}
				}
			}
			any_demesne_title = {
				limit = {
					has_holding_modifier = L3T_jizya
					NOT = { 
						location = {
							OR = {
								religion_group = christian
								religion_group = jewish_group
							}
						}
					}
					OR = {
						holding_type = tribal
						holding_type = nomad
					}
				}
				remove_holding_modifier = L3T_jizya
			}
		}
			
		if = {
			limit = {
				OR = { 
					NOT = { religion_group = muslim }
					is_tribal = yes
					is_nomadic = yes
				}
			}
			any_demesne_title = {
				remove_holding_modifier = L3T_jizya
			}
		}
	}
}
##jyzia modifier province version
province_event = {
    id = REC.31
	hide_window = yes
	
	is_triggered_only = yes #on_county_religion_change
	
	immediate = {
		if = {
			limit = {
				OR = {
					religion_group = christian
					religion_group = jewish_group
				}
				owner = { 
					religion_group = muslim
					NOR = { 
						is_tribal = yes
						is_nomadic = yes
					}					
				}
			}
			owner = {
				any_demesne_title = {
					limit = { 
						NOT = { 
							has_holding_modifier = L3T_jizya
							holding_type = tribal
							holding_type = nomad
						}
					}
					add_holding_modifier = {
						name = L3T_jizya
						duration = -1
					}
				}
			}
		}
		#province is ruled by a non muslim
		if = {
			limit = {
				owner = { NOT = { religion_group = muslim }}
			}
			any_province_holding = {
				limit = {
					holder_scope = { NOT = { religion_group = muslim }}
				}
				##minority excpeted
				remove_holding_modifier = L3T_jizya
			}
		}
		#province becomes muslim
		if = {
			limit = {
				religion_group = muslim
			}
			any_province_holding = {
				remove_holding_modifier = L3T_jizya
			}
		}
		#province is owned by tribal or nomadic
		if = {
			limit = {
				owner = { 
					OR = { 
						is_tribal = yes
						is_nomadic = yes
					}
				}
			}
			any_province_holding = {
				limit = {
					holder_scope = { 
						OR = { 
							is_tribal = yes
							is_nomadic = yes
						}
					}
				}
				##minority excepted
				remove_holding_modifier = L3T_jizya
			}
		}
	}
}