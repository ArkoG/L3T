#############################################################
#  ECO+ an improved economy MOD for CK2 by ARKO  #
#############################################################


namespace = ECO


###évaluation du potentiel économique

##évaluation du potentiel économique -plaines-
province_event = {
    id = ECO.1
	hide_window = yes
	
	trigger = {
		NOT = { has_province_flag = ressources_testees }
		OR = {
			has_province_modifier = province_cotiere
			has_province_modifier = province_terrestre
		}
		OR = {
			terrain = plains
			AND = {
				terrain = coastal_desert
				has_global_flag = SWMH
			}
		}
		NOT = { terrain = forest }
	}
	
	mean_time_to_happen = { days = 10 }

	immediate = {
		set_variable = { which = "resourceNb" value = 0 }
		set_province_flag = ressources_testees
		random_list = {
			80 = { add_province_modifier = { name = agriculture1	duration = -1	} change_variable = { which = "resourceNb" value = 1 } }
			20 = {}
		}
		random_list = {
			30 = { add_province_modifier = { name = elevage1		duration = -1	} change_variable = { which = "resourceNb" value = 1 } }
			35 = { 
				add_province_modifier = { 
					name = foret1
					duration = -1
				}
				change_variable = { which = "resourceNb" value = 1 }
				if = { 
					limit = { NOT = { region = world_europe }} 
					add_province_modifier = { 
						name = foret2_expl
						duration = -1
						#hidden = yes
					}
					set_variable = { which = "wood_cut" value = 0 }
				}
			}
			35 = {}
		}
		province_event = { id = ECO.15 days = 10 }
	}
}

##évaluation du potentiel économique -coteaux-			
province_event = {
    id = ECO.2
	hide_window = yes
	
	trigger = {
		NOT = { has_province_flag = ressources_testees }
		OR = {
			has_province_modifier = province_cotiere
			has_province_modifier = province_terrestre
		}
		terrain = hills
	}
	
	mean_time_to_happen = { days = 10 }

	immediate = {
		set_variable = { which = "resourceNb" value = 0 }
		set_province_flag = ressources_testees
		random_list = {
			20 = { add_province_modifier = { name = elevage1		duration = -1	} change_variable = { which = "resourceNb" value = 1 } }
			50 = { add_province_modifier = { name = agriculture1	duration = -1	} change_variable = { which = "resourceNb" value = 1 } }
			30 = {}
		}
		random_list = {
			70 = {
				if = {			
					limit = { NOT = { has_province_modifier = mine_stop }}
					random_list = {
						25 = { add_province_modifier = { name = minerai1_sel duration = -1 }}
						75 = { add_province_modifier = { name = minerai1 duration = -1 }}
					}
					change_variable = { which = "resourceNb" value = 1 }
				}
				if = {
					limit = { has_province_modifier = mine_stop }
					add_province_modifier = { name = minerai1_sel duration = -1	}
					change_variable = { which = "resourceNb" value = 1 }
				}
			}
			30 = {}
		}
		province_event = { id = ECO.15 days = 10 }
	}
}

##évaluation du potentiel économique -forets-
province_event = {
    id = ECO.3
	hide_window = yes
	
	trigger = {
		NOT = { has_province_flag = ressources_testees }
		OR = {
			has_province_modifier = province_cotiere
			has_province_modifier = province_terrestre
		}
		terrain = forest
	}
	
	mean_time_to_happen = { days = 10 }

	immediate = {
		set_variable = { which = "resourceNb" value = 0 }
		set_province_flag = ressources_testees
		add_province_modifier = {
			name = foret1
			duration = -1
		}
		if = {
			limit = { NOT = { region = world_europe }} 
			add_province_modifier = {
				name = foret2_expl
				duration = -1
				#hidden = yes
			}
			set_variable = { which = "wood_cut" value = 0 }
		}
		change_variable = { which = "resourceNb" value = 1 } 
		random_list = {
			 5 = { add_province_modifier = { name = elevage1		duration = -1	} change_variable = { which = "resourceNb" value = 1 } }
			10 = { add_province_modifier = { name = agriculture1	duration = -1	} change_variable = { which = "resourceNb" value = 1 } }
			10 = {
				if = {			
					limit = { NOT = { has_province_modifier = mine_stop }}
					random_list = {
						25 = { add_province_modifier = { name = minerai1_sel duration = -1 }}
						75 = { add_province_modifier = { name = minerai1 duration = -1 }}
					}
					change_variable = { which = "resourceNb" value = 1 }
				}
				if = {
					limit = { has_province_modifier = mine_stop }
					add_province_modifier = { name = minerai1_sel duration = -1	}
					change_variable = { which = "resourceNb" value = 1 }
				}
			}
			 5 = { add_province_modifier = { name = pierre1			duration = -1	} change_variable = { which = "resourceNb" value = 1 } }
			70 = {}
		}
		province_event = { id = ECO.15 days = 10 }
	}
}

##évaluation du potentiel économique -montagnes-	
province_event = {
    id = ECO.4
	hide_window = yes
	
	trigger = {
		NOT = { has_province_flag = ressources_testees }
		OR = {
			has_province_modifier = province_cotiere
			has_province_modifier = province_terrestre
		}
		terrain = mountain
	}
	
	mean_time_to_happen = { days = 10 }
	
	immediate = {
		set_variable = { which = "resourceNb" value = 0 }
		set_province_flag = ressources_testees
		random_list = {
			40 = { add_province_modifier = { name = elevage1	duration = -1	} change_variable = { which = "resourceNb" value = 1 } }
			25 = {
				if = {			
					limit = { NOT = { has_province_modifier = mine_stop }}
					random_list = {
						25 = { add_province_modifier = { name = minerai1_sel duration = -1 }}
						75 = { add_province_modifier = { name = minerai1 duration = -1 }}
					}
					change_variable = { which = "resourceNb" value = 1 }
				}
				if = {
					limit = { has_province_modifier = mine_stop }
					add_province_modifier = { name = minerai1_sel duration = -1	}
					change_variable = { which = "resourceNb" value = 1 }
				}
			}
			35 = {}
		}
		random_list = {
			70 = { add_province_modifier = { name = pierre1		duration = -1	} change_variable = { which = "resourceNb" value = 1 } }
			30 = {}
		}
		province_event = { id = ECO.15 days = 10 }
	}
}

##évaluation du potentiel économique -terres arables-	
province_event = {
    id = ECO.5
	hide_window = yes
	
	trigger = {
		NOT = { has_province_flag = ressources_testees }
		OR = {
			has_province_modifier = province_cotiere
			has_province_modifier = province_terrestre
		}
		terrain = farmlands
	}
	
	mean_time_to_happen = { days = 10 }
	
	immediate = {
		set_variable = { which = "resourceNb" value = 0 }
		set_province_flag = ressources_testees
		add_province_modifier = { name = agriculture1		duration = -1	}
		change_variable = { which = "resourceNb" value = 1 } 
		random_list = {
			10 = { add_province_modifier = { name = elevage1		duration = -1	} change_variable = { which = "resourceNb" value = 1 } }
			 5 = { 
				add_province_modifier = { 
					name = foret1
					duration = -1
				}
				change_variable = { which = "resourceNb" value = 1 }
				if = { 
					limit = { NOT = { region = world_europe }} 
					add_province_modifier = { 
						name = foret2_expl
						duration = -1
						#hidden = yes
					}
					set_variable = { which = "wood_cut" value = 0 }
				}
			}
			 5 = {
				if = {			
					limit = { NOT = { has_province_modifier = mine_stop }}
					random_list = {
						25 = { add_province_modifier = { name = minerai1_sel duration = -1 }}
						75 = { add_province_modifier = { name = minerai1 duration = -1 }}
					}
					change_variable = { which = "resourceNb" value = 1 }
				}
				if = {
					limit = { has_province_modifier = mine_stop }
					add_province_modifier = { name = minerai1_sel duration = -1	}
					change_variable = { which = "resourceNb" value = 1 }
				}
			}
			10 = { add_province_modifier = { name = pierre1			duration = -1	} change_variable = { which = "resourceNb" value = 1 } }
			70 = {}
		}
		province_event = { id = ECO.15 days = 10 }
	}
}

##évaluation du potentiel économique -déserts-	
province_event = {
    id = ECO.8
	hide_window = yes
	
	trigger = {
		NOT = { has_province_flag = ressources_testees }
		OR = {
			has_province_modifier = province_cotiere
			has_province_modifier = province_terrestre
		}
		terrain = desert
	}
	
	mean_time_to_happen = { days = 10 }
	
	immediate = {
		set_variable = { which = "resourceNb" value = 0 }
		set_province_flag = ressources_testees
		random_list = {
			25 = { add_province_modifier = { name = pierre1		duration = -1	} change_variable = { which = "resourceNb" value = 1 } }
			75 = {}
		}
		random_list = {
			70 = {
				if = {			
					limit = { NOT = { has_province_modifier = mine_stop }}
					random_list = {
						25 = { add_province_modifier = { name = minerai1_sel duration = -1 }}
						75 = { add_province_modifier = { name = minerai1 duration = -1 }}
					}
					change_variable = { which = "resourceNb" value = 1 }
				}
				if = {
					limit = { has_province_modifier = mine_stop }
					add_province_modifier = { name = minerai1_sel duration = -1	}
					change_variable = { which = "resourceNb" value = 1 }
				}
			}
			30 = {}
		}
		province_event = { id = ECO.15 days = 10 }
	}
}

##évaluation du potentiel économique -steppe-	
province_event = {
    id = ECO.80
	hide_window = yes
	
	trigger = {
		NOT = { has_province_flag = ressources_testees }
		OR = {
			has_province_modifier = province_cotiere
			has_province_modifier = province_terrestre
		}
		terrain = steppe
	}
	
	mean_time_to_happen = { days = 10 }
	
	immediate = {
		set_variable = { which = "resourceNb" value = 0 }
		set_province_flag = ressources_testees
		random_list = {
			30 = { add_province_modifier = { name = agriculture1	duration = -1	} change_variable = { which = "resourceNb" value = 1 } }
			70 = {}
		}
		random_list = {
			90 = { add_province_modifier = { name = elevage1	duration = -1	} change_variable = { which = "resourceNb" value = 1 } }
			10 = {}
		}
		province_event = { id = ECO.15 days = 10 }
	}
}

##évaluation du potentiel économique -jungle-	
province_event = {
    id = ECO.81
	hide_window = yes
	
	trigger = {
		NOT = { has_province_flag = ressources_testees }
		OR = {
			has_province_modifier = province_cotiere
			has_province_modifier = province_terrestre
		}
		terrain = jungle
	}
	
	mean_time_to_happen = { days = 10 }
	
	immediate = {
		set_variable = { which = "resourceNb" value = 0 }
		set_province_flag = ressources_testees
		random_list = {
			65 = { 
				add_province_modifier = { 
					name = foret1
					duration = -1
				} 
				change_variable = { which = "resourceNb" value = 1 }
				if = { 
					limit = { NOT = { region = world_europe }} 
					add_province_modifier = { 
						name = foret2_expl
						duration = -1
						#hidden = yes
					}
					set_variable = { which = "wood_cut" value = 0 }
				}
			}
			35 = {}
		}
		random_list = {
			30 = {
				if = {			
					limit = { NOT = { has_province_modifier = mine_stop }}
					random_list = {
						25 = { add_province_modifier = { name = minerai1_sel duration = -1 }}
						75 = { add_province_modifier = { name = minerai1 duration = -1 }}
					}
					change_variable = { which = "resourceNb" value = 1 }
				}
				if = {
					limit = { has_province_modifier = mine_stop }
					add_province_modifier = { name = minerai1_sel duration = -1	}
					change_variable = { which = "resourceNb" value = 1 }
				}
			}
			70 = {}
		}
		province_event = { id = ECO.15 days = 10 }
	}
}

##évaluation du potentiel économique -arctique-	
province_event = {
    id = ECO.82
	hide_window = yes
	
	trigger = {
		NOT = { has_province_flag = ressources_testees }
		OR = {
			has_province_modifier = province_cotiere
			has_province_modifier = province_terrestre
		}
		terrain = arctic
	}
	
	mean_time_to_happen = { days = 10 }
	
	immediate = {
		set_variable = { which = "resourceNb" value = 0 }
		set_province_flag = ressources_testees
		random_list = {
			60 = { 
				add_province_modifier = {
					name = foret1
					duration = -1
				}
				change_variable = { which = "resourceNb" value = 1 }
				if = { 
					limit = { NOT = { region = world_europe }} 
					add_province_modifier = { 
						name = foret2_expl
						duration = -1
						#hidden = yes
					}
					set_variable = { which = "wood_cut" value = 0 }
				}
			}
			40 = {}
		}
		random_list = {
			15 = {
				if = {			
					limit = { NOT = { has_province_modifier = mine_stop }}
					random_list = {
						25 = { add_province_modifier = { name = minerai1_sel duration = -1 }}
						75 = { add_province_modifier = { name = minerai1 duration = -1 }}
					}
					change_variable = { which = "resourceNb" value = 1 }
				}
				if = {
					limit = { has_province_modifier = mine_stop }
					add_province_modifier = { name = minerai1_sel duration = -1	}
					change_variable = { which = "resourceNb" value = 1 }
				}
			}
			25 = { add_province_modifier = { name = elevage1	duration = -1	} change_variable = { which = "resourceNb" value = 1 } }
			60 = {}
		}
		province_event = { id = ECO.15 days = 10 }
	}
}

##ré-évaluation si zéro ressource.	
province_event = {
    id = ECO.15
	hide_window = yes

	is_triggered_only = yes
	
	trigger = {
		has_province_flag = ressources_testees 
		NOT = { #aucune ressource présente
		#on peut aussi mettre une limite fonction de la variable "resourceNb"
		#check_variable = { which = "resourceNb" value = 1 } #less than 1 ressource
			has_province_modifier = agriculture1
			has_province_modifier = elevage1
			has_province_modifier = foret1			
			has_province_modifier = pierre1
			has_province_modifier = minerai1
			has_province_modifier = minerai1_sel
			#has_province_modifier = peche1				
			#has_province_modifier = pisci1
		}
	}
	
	immediate = { #suppression du flag pour réattribution
		clr_province_flag = ressources_testees
		province_event = { id = ECO.1 days = 10 }
		province_event = { id = ECO.2 days = 10 }
		province_event = { id = ECO.3 days = 10 }
		province_event = { id = ECO.4 days = 10 }
		province_event = { id = ECO.5 days = 10 }
		province_event = { id = ECO.8 days = 10 }
		province_event = { id = ECO.80 days = 10 }
		province_event = { id = ECO.81 days = 10 }
		province_event = { id = ECO.82 days = 10 }
	}
}

##marquage port unique
character_event = {
    id = ECO.16
	hide_window = yes

	is_triggered_only = yes	
	
	trigger = {
		any_demesne_province = {
			has_province_modifier = province_cotiere
			OR = {
				NOT = { has_province_modifier = has_fishing_harbour }
				NOT = { has_province_modifier = has_shipyard }
			}
			any_province_holding = {
				OR = {
					has_building = CA_FISH_peche_L1
					has_building = CT_FISH_peche_L1
					has_building = ca_shipyard_1
					has_building = ct_shipyard_1
					has_building = tp_shipyard_1
				}
			}
		}
	}
	immediate = {
		any_demesne_province = {
			limit = { 
				has_province_modifier = province_cotiere
				NOT = { has_province_modifier = has_fishing_harbour }
				any_province_holding = {
					OR = {
						has_building = CA_FISH_peche_L1
						has_building = CT_FISH_peche_L1
					}
				}
			}
			add_province_modifier = {
				name = has_fishing_harbour
				hidden = yes
				duration = -1
			}
		}
		any_demesne_province = {
			limit = {
				has_province_modifier = province_cotiere
				NOT = { has_province_modifier = has_shipyard }
				any_province_holding = {
					OR = {
						has_building = ca_shipyard_1
						has_building = ct_shipyard_1
						has_building = tp_shipyard_1
					}
				}
			}
			add_province_modifier = { 
				name = has_shipyard
				hidden = yes
				duration = -1
			}
		}
	}
}

##marquage holding ressources L2
character_event = {
    id = ECO.17
	hide_window = yes

	is_triggered_only = yes	
	
	trigger = {
		any_realm_province = {
			any_province_holding = {
				OR = {
					AND = {
						OR = {
							has_building = CA_AGRI_cereale_L2
							has_building = CT_AGRI_cereale_L2
							has_building = TP_AGRI_cereale_L2
							#
						}
						NOT = { has_title_flag = agriculture2_cereales }
					}
					AND = {
						OR = {
							has_building = CA_AGRI_verger_L2
							has_building = CT_AGRI_verger_L2
							has_building = TP_AGRI_verger_L2
							#
						}
						NOT = { has_title_flag = agriculture2_fruits }
					}
					AND = {
						OR = {
							has_building = TP_AGRI_maraichage_L2
							#
						}
						NOT = { has_title_flag = agriculture2_legumes }
					}
					AND = {
						OR = {
							has_building = TP_AGRI_vigne_L2
							#
						}
						NOT = { has_title_flag = agriculture2_vigne }
					}
					AND = {
						OR = {
							has_building = CA_BOIS_charbon_L2
							has_building = CT_BOIS_charbon_L2
							#
						}
						NOT = { has_title_flag = foret3_charbon }
					}
					AND = {
						OR = {
							has_building = CA_scierie_L2
							has_building = CT_scierie_L2
							#
						}
						NOT = { has_title_flag = foret3_planche }
					}
				}
			}
		}
	}

	immediate = {
		random_realm_province = {
			random_province_holding = {
				limit = { 
					OR = {
						has_building = CA_AGRI_cereale_L2
						has_building = CT_AGRI_cereale_L2
						has_building = TP_AGRI_cereale_L2
						#
					}
					NOT = { has_title_flag = agriculture2_cereales }
				}
				set_title_flag = agriculture2_cereales
				add_holding_modifier = { name = ressource_L2_dispo duration = -1 }
				change_variable = { which = "developpement" value = 10 }
			}
		}

		random_realm_province = {
			random_province_holding = {
				limit = { 
					OR = {
						has_building = CA_AGRI_verger_L2
						has_building = CT_AGRI_verger_L2
						has_building = TP_AGRI_verger_L2
						#
					}
					NOT = { has_title_flag = agriculture2_fruits }
				}
				set_title_flag = agriculture2_fruits
				add_holding_modifier = { name = ressource_L2_dispo duration = -1 }
				change_variable = { which = "developpement" value = 10 }
			}
		}
		random_realm_province = {
			random_province_holding = {
				limit = { 
					OR = {
						has_building = TP_AGRI_maraichage_L2
						#
					}
					NOT = { has_title_flag = agriculture2_legumes }
				}
				set_title_flag = agriculture2_legumes
				add_holding_modifier = { name = ressource_L2_dispo duration = -1 }
				change_variable = { which = "developpement" value = 10 }
			}
		}
		random_realm_province = {
			random_province_holding = {
				limit = { 
					OR = {
						has_building = TP_AGRI_vigne_L2
						#
					}
					NOT = { has_title_flag = agriculture2_vigne }
				}
				set_title_flag = agriculture2_vigne
				add_holding_modifier = { name = ressource_L2_dispo duration = -1 }
				change_variable = { which = "developpement" value = 10 }
			}
		}
		random_realm_province = {
			random_province_holding = {
				limit = { 
					OR = {
						has_building = CA_BOIS_charbon_L2
						has_building = CT_BOIS_charbon_L2
						#
					}
					NOT = { has_title_flag = foret3_charbon }
				}
				set_title_flag = foret3_charbon
				add_holding_modifier = { name = ressource_L2_dispo duration = -1 }
				change_variable = { which = "developpement" value = 10 }
			}
		}
		random_realm_province = {
			random_province_holding = {
				limit = { 
					OR = {
						has_building = CA_scierie_L2
						has_building = CT_scierie_L2
						#
					}
					NOT = { has_title_flag = foret3_planche }
				}
				set_title_flag = foret3_planche
				add_holding_modifier = { name = ressource_L2_dispo duration = -1 }
				change_variable = { which = "developpement" value = 10 }
			}
		}
	}
}

##upgrade MARKET to L3
character_event = {
    id = ECO.18
	hide_window = yes

	is_triggered_only = yes	
	
	trigger = {
		any_realm_province = {
			any_province_holding = {
				NOT = {
					has_building = ca_marketplace_3
					has_building = ct_marketplace_3
					has_building = tp_marketplace_3
				}					
				OR = {
					AND = {
						has_building = ca_marketplace_2
						has_holding_modifier = ressource_L2_dispo
					}
					AND = {
						has_building = ct_marketplace_2
						has_holding_modifier = ressource_L2_dispo
						has_building = ct_town_2
					}					
					AND = {
						has_building = tp_marketplace_2
						has_holding_modifier = ressource_L2_dispo
					}
				}
			}
		}
	}

	immediate = {
		random_realm_province = {
			random_province_holding = {
				limit = { 
					NOT = { has_building = ca_marketplace_3 }
					has_building = ca_marketplace_2
					has_holding_modifier = ressource_L2_dispo
				}
				add_building = ca_marketplace_3
				change_variable = { which = "developpement" value = 10 }
			}
			random_province_holding = {
				limit = { 
					NOT = { has_building = ct_marketplace_3 }
					has_building = ct_marketplace_2
					has_building = ct_town_2
					has_holding_modifier = ressource_L2_dispo
				}
				add_building = ct_marketplace_3
				change_variable = { which = "developpement" value = 10 }
			}
			random_province_holding = {
				limit = { 
					NOT = { has_building = tp_marketplace_3 }
					has_building = tp_marketplace_2
					has_holding_modifier = ressource_L2_dispo
				}
				add_building = tp_marketplace_3
				change_variable = { which = "developpement" value = 10 }
			}
		}
	}
}
		
###activation ressources

#activation AGRICULTURE -céréales //province
province_event = {
    id = ECO.100
	desc = "DESCECO.100"
	picture = GFX_evt_ECO3
	
	trigger = {
		has_province_modifier = agriculture1 
		NOT = { has_province_modifier = agriculture2_cereales } #happens only on first holding getting the ress building + market
		any_province_holding = {
			OR = {
				AND = {
					has_building = CA_AGRI_cereale_L1
					has_building = ca_marketplace_3
				}
				AND = {
					has_building = CT_AGRI_cereale_L1
					has_building = ct_marketplace_3
				}
				AND = {
					has_building = TP_AGRI_cereale_L1
					has_building = tp_marketplace_3
				}
			}
		}
	}
		
	mean_time_to_happen = { days = 360 }

	immediate = {
		random_province_holding = {
			limit = {
				OR = {
					AND = {
						has_building = CA_AGRI_cereale_L1
						has_building = ca_marketplace_3
					}
					AND = {
						has_building = CT_AGRI_cereale_L1
						has_building = ct_marketplace_3
					}
					AND = {
						has_building = TP_AGRI_cereale_L1
						has_building = tp_marketplace_3
					}
				}
			}
			set_title_flag = bonus_origin
			save_event_target_as = holding_pour_desc #for flavour text
		}
	}

	option = {
		name = "ECO.100A"
		add_province_modifier = { name = agriculture2_cereales duration = -1 }
		random_province_holding = {
			limit = {
				has_title_flag = bonus_origin
			}
			clear_event_target = holding_pour_desc #for flavour text
			clr_title_flag = bonus_origin
		}
	}
}

#activation FOOD -fruits //variable province
character_event = {
    id = ECO.101
	hide_window = yes

	is_triggered_only = yes	
	
	trigger = {
		any_realm_province = {
			NOT = { has_province_flag = agriculture2_fruits_recu }
			any_province_holding = {
				OR = {
					AND = {
						has_building = CA_AGRI_verger_L2
						has_building = ca_marketplace_3
						NOT = { has_title_flag = agriculture2_fruits_given }
					}
					AND = {
						has_building = CT_AGRI_verger_L2
						has_building = ct_marketplace_3
						NOT = { has_title_flag = agriculture2_fruits_given }
					}
					AND = {
						has_building = TP_AGRI_verger_L2
						has_building = tp_marketplace_3
						NOT = { has_title_flag = agriculture2_fruits_given }
					}
				}
			}
		}
	}

	immediate = {
		random_realm_province = {
			limit = {
				NOT = { has_province_flag = agriculture2_fruits_recu }
				any_province_holding = {
					OR = {
						AND = {
							has_building = CA_AGRI_verger_L2
							has_building = ca_marketplace_3
							NOT = { has_title_flag = agriculture2_fruits_given }
						}
						AND = {
							has_building = CT_AGRI_verger_L2
							has_building = ct_marketplace_3
							NOT = { has_title_flag = agriculture2_fruits_given }
						}
						AND = {
							has_building = TP_AGRI_verger_L2
							has_building = tp_marketplace_3
							NOT = { has_title_flag = agriculture2_fruits_given }
						}
					}
				}
			}
			random_province_holding = {
				limit = {
					OR = {
						AND = {
							has_building = CA_AGRI_verger_L2
							has_building = ca_marketplace_3
							NOT = { has_title_flag = agriculture2_fruits_given }
						}
						AND = {
							has_building = CT_AGRI_verger_L2
							has_building = ct_marketplace_3
							NOT = { has_title_flag = agriculture2_fruits_given }
						}
						AND = {
							has_building = TP_AGRI_verger_L2
							has_building = tp_marketplace_3
							NOT = { has_title_flag = agriculture2_fruits_given }
						}
					}
				}
				set_title_flag = agriculture2_fruits_given
			}
			change_variable = { which = "province_food" value = 1 }
			set_province_flag = agriculture2_fruits_recu
		}
	}
}

#activation FOOD -legumes //variable province
character_event = {
    id = ECO.102
	hide_window = yes

	is_triggered_only = yes	
	
	trigger = {
		any_realm_province = {
			NOT = { has_province_flag = agriculture2_legumes_recu }
			any_province_holding = {
				OR = {
					AND = {
						has_building = CA_AGRI_verger_L2
						has_building = ca_marketplace_3
						NOT = { has_title_flag = agriculture2_legumes_given }
					}
					AND = {
						has_building = CT_AGRI_verger_L2
						has_building = ct_marketplace_3
						NOT = { has_title_flag = agriculture2_legumes_given }
					}
					AND = {
						has_building = TP_AGRI_verger_L2
						has_building = tp_marketplace_3
						NOT = { has_title_flag = agriculture2_legumes_given }
					}
				}
			}
		}
	}

	immediate = {
		random_realm_province = {
			limit = {
				NOT = { has_province_flag = agriculture2_legumes_recu }
				random_province_holding = {
					#OR = {
						AND = {
							has_building = TP_AGRI_maraichage_L2
							has_building = tp_marketplace_3
							NOT = { has_title_flag = agriculture2_legumes_given }
						}
					#}
				}
			}
			change_variable = { which = "province_food" value = 1 }
			set_province_flag = agriculture2_legumes_recu
		}
		random_realm_province = {
			random_province_holding = {
				limit = {
					#OR = {
						AND = {
							has_building = TP_AGRI_maraichage_L2
							has_building = tp_marketplace_3
							NOT = { has_title_flag = agriculture2_legumes_given }
						}
					#}
				}
				set_title_flag = agriculture2_legumes_given
			}
		}
	}
}


#activation ELEVAGE -ovin laine
province_event = {
    id = ECO.110
	desc = "DESCECO.110"
	picture = GFX_evt_market
	
	trigger = {
		has_province_modifier = elevage1
		NOT = { has_province_modifier = elevage2_laine }
		any_province_holding = {
			has_building = CA_ELEV_ovin_L2a #bourg féodal hors montagne
		}
	}
		
	mean_time_to_happen = { days = 360 }

	option = {
		name = "ECO.110A"
		add_province_modifier = { name = elevage2_laine duration = -1 }		
	}
}

#activation ELEVAGE -ovin fromage
#into FOOD computation instead
#province_event = {
#    id = ECO.111
#	desc = "DESCECO.111"
#	picture = GFX_evt_market
#	
#	trigger = {
#		has_province_modifier = elevage1
#		NOT = { has_province_modifier = elevage2_fromage }
#		any_province_holding = {
#			OR = {	
#				has_building = CA_ELEV_ovin_L2b #bourg féodal, alpage
#				has_building = TP_ELEV_ovin_L2
#			}
#		}
#	}
#		
#	mean_time_to_happen = { days = 360 }
#
#	option = {
#		name = "ECO.111A"
#		add_province_modifier = { name = elevage2_fromage duration = -1 }		
#	}
#}

#activation ELEVAGE -bovin bête sur pied
province_event = {
    id = ECO.112
	desc = "DESCECO.112"
	picture = GFX_evt_market
	
	trigger = {
		has_province_modifier = elevage1
		NOT = { has_province_modifier = elevage2_boeuf }
		any_province_holding = {
			has_building = CT_ELEV_bovin_L2
		}
	}
		
	mean_time_to_happen = { days = 360 }

	option = {
		name = "ECO.112A"
		add_province_modifier = { name = elevage2_boeuf duration = -1 }		
	}
}

#activation FORET -bois
#marquage holding inutile

#activation FORET -charbon //province
province_event = {
    id = ECO.121
	desc = "DESCECO.121"
	picture = GFX_evt_XYLO_forest5
	
	trigger = {
		has_province_modifier = foret2_expl
		NOT = { has_province_modifier = foret3_charbon }
#trade_version	##NOT = { has_province_modifier = agriculture2_cereales_trade } #happens only on first holding getting the ress building + market

		any_province_holding = {
			OR = {
				AND ={
					has_building = CA_BOIS_charbon_L2
					has_building = ca_marketplace_3
				}
				AND = {
					has_building = CT_BOIS_charbon_L2
					has_building = ct_marketplace_3
				}
			}
		}
	}
		
	mean_time_to_happen = { days = 360 }

	immediate = {
		random_province_holding = {
			limit = {
				OR = {
					AND ={
						has_building = CA_BOIS_charbon_L2
						has_building = ca_marketplace_3
					}
					AND = {
						has_building = CT_BOIS_charbon_L2
						has_building = ct_marketplace_3
					}
				}
			}
			set_title_flag = bonus_origin
			save_event_target_as = holding_pour_desc #for flavour text
		}
	}
	
	option = {
		name = "ECO.121A"
		add_province_modifier = { name = foret3_charbon duration = -1 }		
#trade_version	#add_province_modifier = { name = agriculture2_cereales_trade duration = -1 }
		random_province_holding = {
			limit = {
				has_title_flag = bonus_origin
			}
#useless here		#hidden_tooltip = { add_holding_modifier = { name = has_ress_L2 duration = -1 hidden = yes }}

			clear_event_target = holding_pour_desc #for flavour text
			clr_title_flag = bonus_origin
		}
	}
}

#activation CHARBON //holding
#character_event = {
#    id = ECO.1210
#	hide_window = yes
#
#	is_triggered_only = yes	
#	
#	trigger = {
#		any_realm_province = {
#			any_province_holding = {
#				NOT = { has_holding_modifier = foret2_charbon }
#				OR = {
#					has_building = CA_BOIS_charbon_L2
#					has_building = CT_BOIS_charbon_L2
#				}
#			}
#		}
#	}
#		
#	immediate = {
#		any_realm_province = {
#			any_province_holding = {
#				limit = {
#					OR = {
#						has_building = CA_BOIS_charbon_L2
#						has_building = CT_BOIS_charbon_L2
#					}
#				}
#				add_holding_modifier = { name = foret2_charbon duration = -1 }
#			}
#		}
#	}
#}

#activation PIERRE
#useless, rock won't travel anymore

#activation MINERAI -fer
province_event = {
    id = ECO.140
	desc = "DESCECO.140"
	picture = GFX_evt_market
	
	trigger = {
		has_province_modifier = minerai1
		NOT = { has_province_modifier = minerai2_fer }
		any_province_holding = {
			has_building = CA_MINE_minerai_L1 #lowered requirement to Level_1
		}
	}
		
	mean_time_to_happen = { days = 360 }

	immediate = {
			#set_province_flag = mine_active   ###ou modifier hidden ?
			set_variable = { which = "stock_minerai" value = 0 }
			set_variable = { which = "balrog_point" value = 0 }

	#stock initial = 20 (stock annuel moyen)x20/50ans
	#
	#
	#
	#
	#	
	#consos normales
	#L1 consomme 10/an ; L2 consomme 20/an ; L3 consomme 30/an
	#accident réduit les consos de 30%
	#L1 consomme 7/an ; L2 consomme 14/an ; L3 consomme 20/an
	#hausse de productivité majore 30% les consos (remplace ex flavour event nouveau filon)
	#L1 consomme 13/an ; L2 consomme 26/an ; L3 consomme 40/an
	#
	#nouveau filon prolonge de XX le stock + alea
	#decision d'investir prolonge de XX le stock + alea
	#
	#
	#stock à zéro = mine inactive.
	#définir seuil inactivité selon les valeurs à défalquer
	#!!! voir les combinaisons de multiples
	#	
	#
			random_list = {
				05 = { change_variable = { which = "stock_minerai" value =  900 } } #45ans si conso 20
				05 = { change_variable = { which = "stock_minerai" value = 1200 } } #
				05 = { change_variable = { which = "stock_minerai" value = 1500 } }
				05 = { change_variable = { which = "stock_minerai" value = 1800 } }
				10 = { change_variable = { which = "stock_minerai" value = 2100 } }
				10 = { change_variable = { which = "stock_minerai" value = 2400 } }
				10 = { change_variable = { which = "stock_minerai" value = 2700 } }
				25 = { change_variable = { which = "stock_minerai" value = 3000 } }
				30 = { change_variable = { which = "stock_minerai" value = 3300 } }
				30 = { change_variable = { which = "stock_minerai" value = 3600 } } 
				25 = { change_variable = { which = "stock_minerai" value = 3900 } } 
				10 = { change_variable = { which = "stock_minerai" value = 4200 } }
				10 = { change_variable = { which = "stock_minerai" value = 4500 } }
				10 = { change_variable = { which = "stock_minerai" value = 4800 } }
				05 = { change_variable = { which = "stock_minerai" value = 5100 } }
				05 = { change_variable = { which = "stock_minerai" value = 5400 } } #270ans si conso 20
				}
			}

	option = {
		name = "ECO.140A"
		#remove_province_modifier = minerai1
		add_province_modifier = { name = minerai2_fer duration = -1 }
		
	}
}

#activation MINERAI -sel
province_event = {
    id = ECO.141
	desc = "DESCECO.141"
	picture = GFX_evt_market
	
	trigger = {
		has_province_modifier = minerai1_sel
		NOT = { has_province_modifier = minerai2_sel_gemme }
		any_province_holding = {
			has_building = CT_MINE_sel_L2
		}
	}
		
	mean_time_to_happen = { days = 360 }

	option = {
		name = "ECO.141A"
		add_province_modifier = { name = minerai2_sel_gemme duration = -1 }		
	}
}

#activation PECHE
#into FOOD computation instead
#province_event = {
#    id = ECO.150
#	desc = "DESCECO.150"
#	picture = GFX_evt_L3T_fishing
#	
#	trigger = {
#		has_province_modifier = peche1
#		NOT = { has_province_modifier = peche2_poisson }
#		any_province_holding = {
#			OR = {	
#				has_building = CA_FISH_peche_L2
#				has_building = CT_FISH_peche_L2
#			}
#		}
#	}
#		
#	mean_time_to_happen = { days = 360 }
#
#	option = {
#		name = "ECO.150A"
#		remove_province_modifier = peche1
#		add_province_modifier = { name = peche1 duration = -1 hidden = yes } #now hidden instead of removed
#		add_province_modifier = { name = peche2_poisson duration = -1 }		
#	}
#}

#activation PISCICULTURE
#into FOOD computation instead
#province_event = {
#   id = ECO.151
#	desc = "DESCECO.151"
#	picture = GFX_evt_L3T_fishing
#	
#	trigger = {
#		has_province_modifier = pisci1
#		NOT = { has_province_modifier = pisci2_poisson }
#		any_province_holding = {
#			OR = {	
#				#has_building = CA_FISH_pisci_L2
#				has_building = TP_FISH_pisci_L2
#			}
#		}
#	}
#		
#	mean_time_to_happen = { days = 360 }
#
#	option = {
#		name = "ECO.151A"
#		remove_province_modifier = pisci1
#		add_province_modifier = { name = pisci1 duration = -1 hidden = yes } #now hidden instead of removed
#		add_province_modifier = { name = pisci2_poisson duration = -1 }		
#	}
#}

#activation BINOUSE
province_event = {
    id = ECO.105
	desc = "DESCECO.105"
	picture = GFX_evt_market
	
	trigger = {
		OR = {
			has_province_modifier = agriculture2_cereales
			any_neighbor_province = { has_province_modifier = agriculture2_cereales }
		}
		NOT = { 
			has_province_modifier = agriculture3_biere
			has_province_modifier = agriculture3_biere_Q1
			has_province_modifier = agriculture3_biere_Q2
			has_province_modifier = agriculture3_biere_Q3
		}
		any_province_holding = {
			OR = {	
				has_building = CT_brasserie_L2
				has_building = TP_brasserie_L2
			}
		}
	}
		
	mean_time_to_happen = { days = 360 }

	immediate = {
		random_province_holding = {
			limit = {
				OR = {	
					has_building = CT_brasserie_L2
					has_building = TP_brasserie_L2
				}
			}
			save_event_target_as = holding_pour_desc
		}
	}
	
	option = {
		name = "ECO.105A"
		add_province_modifier = { name = agriculture3_biere duration = -1 }
		custom_tooltip = { text = TOOLTIP_bonus_dev_ressources_avancee }
		hidden_tooltip = {
			event_target:holding_pour_desc = {
				change_variable = { which = "developpement" value = 10 }
				#holder_scope = { character_event = { id = L3T.11094 days = 0 }} #totoro
				clear_event_target = holding_pour_desc
			}
		}
	}
}

#activation VIN
province_event = {
    id = ECO.106
	desc = "DESCECO.106"
	picture = GFX_evt_market
	
	trigger = {
		OR = {
			has_province_modifier = agriculture2_vigne
			any_neighbor_province = { has_province_modifier = agriculture2_vigne }
		}
		NOT = { 
			has_province_modifier = agriculture3_vin
			has_province_modifier = agriculture3_vin_Q1
			has_province_modifier = agriculture3_vin_Q2
			has_province_modifier = agriculture3_vin_Q3			
		}
		any_province_holding = {
			OR = {	
				has_building = CT_chai_L2
				has_building = TP_chai_L2
			}
		}
	}
		
	mean_time_to_happen = { days = 360 }
	
	immediate = {
		random_province_holding = {
			limit = {
				OR = {	
					has_building = CT_chai_L2
					has_building = TP_chai_L2
				}
			}
			save_event_target_as = holding_pour_desc
		}
	}

	option = {
		name = "ECO.106A"
		add_province_modifier = { name = agriculture3_vin duration = -1 }
		custom_tooltip = { text = TOOLTIP_bonus_dev_ressources_avancee }
		hidden_tooltip = {		
			event_target:holding_pour_desc = {
				change_variable = { which = "developpement" value = 10 }
				#holder_scope = { character_event = { id = L3T.11094 days = 0 }} #totoro
				clear_event_target = holding_pour_desc
			}
		}		
	}
}

#activation CIDRE
#cider doesn't exists anymore

#activation FARINE
province_event = {
    id = ECO.107
	desc = "DESCECO.107"
	picture = GFX_evt_L3T_moulin
	
	trigger = {
		has_province_modifier = agriculture2_cereales
		NOT = { has_province_modifier = agriculture3_farine }
		any_province_holding = {
			OR = {	
				has_building = CA_AGRI_moulin_L2
				has_building = CT_AGRI_moulin_L2
				has_building = TP_AGRI_moulin_L2
			}
		}
	}
		
	mean_time_to_happen = { days = 360 }

	option = {
		name = "ECO.107A"
		add_province_modifier = { name = agriculture3_farine duration = -1 }		
	}
}

#activation PAIN
#into FOOD computation instead
#province_event = {
#    id = ECO.109
#	desc = "DESCECO.109"
#	picture = GFX_evt_market
#	
#	trigger = {
#		has_province_modifier = agriculture3_farine
#		NOT = { has_province_modifier = agriculture4_pain }
#		any_province_holding = {
#			OR = {	
#				has_building = CA_AGRI_boulangerie_L2
#				has_building = CT_AGRI_boulangerie_L2
#				has_building = TP_AGRI_boulangerie_L2
#			}
#		}
#	}
#		
#	mean_time_to_happen = { days = 360 }
#
#	option = {
#		name = "ECO.109A"
#		add_province_modifier = { name = agriculture4_pain duration = -1 }		
#	}
#}

#activation VIANDE
#into FOOD computation instead
#province_event = {
#    id = ECO.114
#	desc = "DESCECO.114"
#	picture = GFX_evt_L3T_boucherie
#	
#	trigger = {
#		has_province_modifier = elevage2_boeuf
#		NOT = { has_province_modifier = elevage3_viande }
#		any_province_holding = {
#			has_building = CT_ELEV_boucherie_L2
#		}
#	}
#		
#	mean_time_to_happen = { days = 360 }
#
#	option = {
#		name = "ECO.114A"
#		add_province_modifier = { name = elevage3_viande duration = -1 }		
#	}
#}

#activation FUMAISON
#into FOOD computation instead 
###can be exported too
#province_event = {
#    id = ECO.152
#	desc = "DESCECO.152"
#	picture = GFX_evt_market
#	
#	trigger = {
#		OR = {
#			has_province_modifier = peche2_poisson
#			has_province_modifier = pisci2_poisson
#		}
#		NOT = { has_province_modifier = peche_pisci3_fumaison }
#		any_province_holding = {
#			OR = {	
#				has_building = CA_FISH_fumoir_L2
#				has_building = CT_FISH_fumoir_L2
#				has_building = TP_FISH_fumoir_L2
#			}
#		}
#	}
#		
#	mean_time_to_happen = { days = 360 }
#
#	option = {
#		name = "ECO.152A"
#		add_province_modifier = { name = peche_pisci3_fumaison duration = -1 }		
#	}
#}

#activation CUIR
province_event = {
    id = ECO.113
	desc = "DESCECO.113"
	picture = GFX_evt_market
	
	trigger = {
		OR = {
			has_province_modifier = elevage2_boeuf
			any_neighbor_province = { has_province_modifier = elevage2_boeuf }
		}
		NOT = { has_province_modifier = elevage3_cuir}
		any_province_holding = {
			has_building = CT_tannerie_L2
		}
	}
		
	mean_time_to_happen = { days = 360 }

	option = {
		name = "ECO.113A"
		add_province_modifier = { name = elevage3_cuir duration = -1 }		
	}
}

#activation foret PLANCHE //province
province_event = {
    id = ECO.122
	desc = "DESCECO.122"
	picture = GFX_evt_XYLO_forest5
	
	trigger = {
		has_province_modifier = foret2_expl
		NOT = { has_province_modifier = foret3_planche }
#trade_version	##NOT = { has_province_modifier = agriculture2_cereales_trade } #happens only on first holding getting the ress building + market

		any_province_holding = {
			OR = {
				AND ={
					has_holding_modifier = foret3_planche
					has_building = ca_marketplace_3
				}
				AND = {
					has_holding_modifier = foret3_planche
					has_building = ct_marketplace_3
				}
			}
		}
	}
		
	mean_time_to_happen = { days = 360 }

	immediate = {
		random_province_holding = {
			limit = {
				OR = {
					AND ={
						has_holding_modifier = foret3_planche
						has_building = ca_marketplace_3
					}
					AND = {
						has_holding_modifier = foret3_planche
						has_building = ct_marketplace_3
					}
				}
			}
			set_title_flag = bonus_origin
			save_event_target_as = holding_pour_desc #for flavour text
		}
	}
	
	option = {
		name = "ECO.122A"
		add_province_modifier = { name = foret3_planche duration = -1 }		
#trade_version	#add_province_modifier = { name = agriculture2_cereales_trade duration = -1 }
		random_province_holding = {
			limit = {
				has_title_flag = bonus_origin
			}
#useless here		#hidden_tooltip = { add_holding_modifier = { name = has_ress_L2 duration = -1 hidden = yes }}

			clear_event_target = holding_pour_desc #for flavour text
			clr_title_flag = bonus_origin
		}
	}
}

#activation PLANCHE //holding
#

#activation VERRE //province
province_event = {
    id = ECO.123
	desc = "DESCECO.123"
	picture = GFX_evt_XYLO_forest5
	
	trigger = {
		has_province_modifier = foret2_expl
		NOT = { has_province_modifier = foret3_verre }
#trade_version	##NOT = { has_province_modifier = agriculture2_cereales_trade } #happens only on first holding getting the ress building + market

		any_province_holding = {
			OR = {
				AND ={
					has_holding_modifier = foret3_verre
					has_building = ca_marketplace_3
				}
				AND = {
					has_holding_modifier = foret3_verre
					has_building = ct_marketplace_3
				}
			}
		}
	}
		
	mean_time_to_happen = { days = 360 }

	immediate = {
		random_province_holding = {
			limit = {
				OR = {
					AND ={
						has_holding_modifier = foret3_verre
						has_building = ca_marketplace_3
					}
					AND = {
						has_holding_modifier = foret3_verre
						has_building = ct_marketplace_3
					}
				}
			}
			set_title_flag = bonus_origin
			save_event_target_as = holding_pour_desc #for flavour text
		}
	}
	
	option = {
		name = "ECO.122A"
		add_province_modifier = { name = foret3_verre duration = -1 }		
#trade_version	#add_province_modifier = { name = agriculture2_cereales_trade duration = -1 }
		random_province_holding = {
			limit = {
				has_title_flag = bonus_origin
			}
#useless here		#hidden_tooltip = { add_holding_modifier = { name = has_ress_L2 duration = -1 hidden = yes }}

			clear_event_target = holding_pour_desc #for flavour text
			clr_title_flag = bonus_origin
		}
	}
}


###
#the modifier will be given by the trade propection (targeted)decision
#the modifier is a pre-req/trigger for the buildings
#the potential for the decision is trade nodes and trade posts
###


##activation PEAUX
#province_event = {
#    id = ECO.124
#	desc = "DESCECO.124"
#	picture = GFX_evt_market
#	
#	trigger = {
#		NOT = { has_province_modifier = peaux2_fourrure }
#		any_province_holding = {
#			OR = {	
#				has_building = TR_import_peaux_3
#				has_building = CT_import_peaux_3
#			}
#		}
#	}
#		
#	mean_time_to_happen = { days = 360 }
#
#	option = {
#		name = "ECO.124A"
#		add_province_modifier = { name = peaux2_fourrure duration = -1 }		
#	}
#}
##activation JOYAUX
#province_event = {
#    id = ECO.125
#	desc = "DESCECO.125"
#	picture = GFX_evt_market
#	
#	trigger = {
#		NOT = { has_province_modifier = joyaux2_bijoux }
#		any_province_holding = {
#			OR = {		
#				has_building = TR_import_joyaux_3
#				has_building = CT_import_joyaux_3
#			}
#		}
#	}
#		
#	mean_time_to_happen = { days = 360 }
#
#	option = {
#		name = "ECO.125A"
#		add_province_modifier = { name = joyaux2_bijoux duration = -1 }		
#	}
#}
##activation EPICES
#province_event = {
#    id = ECO.126
#	desc = "DESCECO.126"
#	picture = GFX_evt_market
#	
#	trigger = {
#		NOT = { has_province_modifier = epices2_epices}
#		any_province_holding = {
#			OR = {		
#				has_building = TR_import_epices_3
#				has_building = CT_import_epices_3 
#			}
#		}
#	}
#		
#	mean_time_to_happen = { days = 360 }
#
#	option = {
#		name = "ECO.126A"
#		add_province_modifier = { name = epices2_epices duration = -1 }		
#	}
#}

#activation PIERRE TAILLE
province_event = {
    id = ECO.131
	desc = "DESCECO.131"
	picture = GFX_evt_market
	
	trigger = {
		OR = {
			has_province_modifier = pierre2_pierre_brute
			any_neighbor_province = { has_province_modifier = pierre2_pierre_brute }
		}
		NOT = { has_province_modifier = pierre3_pierre_taille}
		any_province_holding = {
			OR = {	
				has_building = CA_pierre_taille_L2
				has_building = CT_pierre_taille_L2
			}
		}
	}
		
	mean_time_to_happen = { days = 360 }

	option = {
		name = "ECO.131A"
		add_province_modifier = { name = pierre3_pierre_taille duration = -1 }		
	}
}

#activation METAL
province_event = {
    id = ECO.144
	desc = "DESCECO.144"
	picture = GFX_evt_market
	
	trigger = {
		OR = {
			has_province_modifier = minerai2_fer
			any_neighbor_province = { has_province_modifier = minerai2_fer }
		}
		NOT = { has_province_modifier = minerai3_metal}
		any_province_holding = {
			has_building = CA_fonderie_L2
		}
	}
		
	mean_time_to_happen = { days = 360 }

	option = {
		name = "ECO.144A"
		add_province_modifier = { name = minerai3_metal duration = -1 }		
	}
}

#activation OUTILS
province_event = {
    id = ECO.145
	desc = "DESCECO.145"
	picture = GFX_evt_ECO_outils_forge
	
	trigger = {
		OR = {
			has_province_modifier = minerai3_metal
			any_neighbor_province = { has_province_modifier = minerai3_metal }
		}
		NOT = { has_province_modifier = minerai4_outils}
		any_province_holding = {
			has_building = CA_outilleur_L2
		}
	}
		
	mean_time_to_happen = { days = 360 }

	option = {
		name = "ECO.145A"
		add_province_modifier = { name = minerai4_outils duration = -1 }		
	}
}

#activation SEL RAFFINE
province_event = {
    id = ECO.146
	desc = "DESCECO.146"
	picture = GFX_evt_market
	
	trigger = {
		OR = {
			has_province_modifier = minerai2_sel_gemme
			any_neighbor_province = { has_province_modifier = minerai2_sel_gemme }
		}
		NOT = { has_province_modifier = minerai3_sel_raffine}
		any_province_holding = {
			has_building = CT_sel_raffine_L2
		}
	}
		
	mean_time_to_happen = { days = 360 }

	option = {
		name = "ECO.146A"
		add_province_modifier = { name = minerai3_sel_raffine duration = -1 }		
	}
}

#activation SALAISON
province_event = {
#into FOOD computation
###can be exported too
    id = ECO.147
	desc = "DESCECO.147"
	picture = GFX_evt_market
	
	trigger = {
		OR = {
			has_province_modifier = minerai2_sel_gemme
			any_neighbor_province = { has_province_modifier = minerai2_sel_gemme }
		}
		NOT = { has_province_modifier = minerai3_salaison}
		any_province_holding = {
			has_building = CT_saline_L2
		}
	}
		
	mean_time_to_happen = { days = 360 }

	option = {
		name = "ECO.147A"
		add_province_modifier = { name = minerai3_salaison duration = -1 }		
	}
}

#activation ETOFFE
province_event = {
    id = ECO.115
	desc = "DESCECO.115"
	picture = GFX_evt_ECO_etoffe_marche
	
	trigger = {
		OR = {
			has_province_modifier = elevage2_laine
			any_neighbor_province = { has_province_modifier = elevage2_laine }
		}
		NOT = { has_province_modifier = elevage3_etoffe}
		any_province_holding = {
			has_building = CT_atelier_L2
		}
	}
		
	mean_time_to_happen = { days = 360 }

	option = {
		name = "ECO.115A"
		add_province_modifier = { name = elevage3_etoffe duration = -1 }		
	}
}

#activation DRAP
province_event = {
    id = ECO.116
	desc = "DESCECO.116"
	picture = GFX_evt_ECO_etoffe_marche
	
	trigger = {
		OR = {
			has_province_modifier = elevage3_etoffe
			any_neighbor_province = { has_province_modifier = elevage3_etoffe }
		}
		NOT = { has_province_modifier = elevage4_drap}
		any_province_holding = {
			has_building = CT_draperie_L2
		}
	}
		
	mean_time_to_happen = { days = 360 }

	option = {
		name = "ECO.116A"
		add_province_modifier = { name = elevage4_drap duration = -1 }		
	}
}

#activation ELEVAGE -cheval
province_event = {
    id = ECO.117
	desc = "DESCECO.117"
	picture = GFX_evt_market
	
	trigger = {
		has_province_modifier = elevage1
		NOT = { has_province_modifier = elevage2_cheval }
		any_province_holding = {
			has_building = CA_ELEV_cheval_L2
		}
	}
		
	mean_time_to_happen = { days = 360 }

	option = {
		name = "ECO.117A"
		add_province_modifier = { name = elevage2_cheval duration = -1 }		
	}
}

# activation ARMES
province_event = {
    id = ECO.148
	desc = "DESCECO.148"
	picture = GFX_evt_ECO_outils_forge
	
	trigger = {
		OR = {
			has_province_modifier = minerai3_metal
			any_neighbor_province = { has_province_modifier = minerai3_metal }
		}
		NOT = { has_province_modifier = minerai4_armes}
		any_province_holding = {
			has_building = CA_armurerie_L2
		}
	}
		
	mean_time_to_happen = { days = 360 }

	option = {
		name = "ECO.148A"
		add_province_modifier = { name = minerai4_armes duration = -1 }	
		custom_tooltip = { text = des_armes }
	}
}

#activation OR
province_event = {
    id = ECO.142
	desc = "DESCECO.142"
	picture = GFX_evt_market
	
	trigger = {
		has_province_modifier = minerai1
		NOT = { has_province_modifier = minerai2_or }
		any_province_holding = {
			has_building = CT_MINE_or_L2
		}
	}
		
	mean_time_to_happen = { days = 360 }

	option = {
		name = "ECO.142A"
		add_province_modifier = { name = minerai2_or duration = -1 }		
	}
}

#activation CUIVRE
province_event = {
    id = ECO.143
	desc = "DESCECO.143"
	picture = GFX_evt_market
	
	trigger = {
		has_province_modifier = minerai1
		NOT = { has_province_modifier = minerai2_cuivre }
		any_province_holding = {
			has_building = CT_MINE_cuivre_L2
		}
	}
		
	mean_time_to_happen = { days = 360 }

	option = {
		name = "ECO.143A"
		add_province_modifier = { name = minerai2_cuivre duration = -1 }		
	}
}