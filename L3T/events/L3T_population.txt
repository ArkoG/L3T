# Initialisation of population buildings at starting
character_event = {
	id = L3T.1101
	hide_window = yes
	ai = no
	is_triggered_only = yes
	
	trigger = {
		NOT = { has_global_flag = init_population }
	}
	
	immediate = {
		set_global_flag = init_population
		any_title = {
			limit = { tier = baron }
			export_to_variable = { which = "developpement" value = num_of_buildings } #gives a random seed based on techs
			
			if = {
				limit = {	
					year = 1000
					}
				random_list = {
					15 = { change_variable = { which = "developpement" value = 10 }} #gives a random bonus
					20 = { change_variable = { which = "developpement" value = 20 }}
					40 = { change_variable = { which = "developpement" value = 30 }}
					15 = { change_variable = { which = "developpement" value = 40 }}
					10 = { change_variable = { which = "developpement" value = 50 }}
				}
			}
			if = {
				limit = {	
					year = 1150
					}
				change_variable = { which = "developpement" value = 50 }
			}

			# Castles
			if = {
				#limit = { num_of_buildings = 10 }
				limit = { check_variable = { which = "developpement" value = 100 }}
				add_building = ca_town_1
			}
			
			if = {
				#limit = { num_of_buildings = 15 }
				limit = { check_variable = { which = "developpement" value = 150 }}
				add_building = ca_town_2
			}
			
			if = {
				#limit = { num_of_buildings = 20 }
				limit = { check_variable = { which = "developpement" value = 200 }}
				add_building = ca_town_3
			}
			
			if = {
				#limit = { num_of_buildings = 25 }
				limit = { check_variable = { which = "developpement" value = 250 }}
				add_building = ca_town_4
			}
			
			if = {
				#limit = { num_of_buildings = 35 }
				limit = { check_variable = { which = "developpement" value = 350 }}
				add_building = ca_town_5
			}
			# Cities
			if = {
				#limit = { num_of_buildings = 10 }
				limit = { check_variable = { which = "developpement" value = 100 }}
				add_building = ct_town_1
			}
			
			if = {
				#limit = { num_of_buildings = 15 }
				limit = { check_variable = { which = "developpement" value = 150 }}
				add_building = ct_town_2
			}
			
			if = {
				#limit = { num_of_buildings = 20 }
				limit = { check_variable = { which = "developpement" value = 200 }}
				add_building = ct_town_3
			}
			
			if = {
				#limit = { num_of_buildings = 25 }
				limit = { check_variable = { which = "developpement" value = 250 }}
				add_building = ct_town_4
			}
			
			if = {
				#limit = { num_of_buildings = 30 }
				limit = { check_variable = { which = "developpement" value = 300 }}
				add_building = ct_town_5
			}
			# Temples	
			if = {
				#limit = { num_of_buildings = 12 }
				limit = { check_variable = { which = "developpement" value = 120 }}
				add_building = tp_town_1
			}
			
			if = {
				#limit = { num_of_buildings = 17 }
				limit = { check_variable = { which = "developpement" value = 170 }}
				add_building = tp_town_2
			}
			
			if = {
				#limit = { num_of_buildings = 22 }
				limit = { check_variable = { which = "developpement" value = 220 }}
				add_building = tp_town_3
			}
			
			if = {
				#limit = { num_of_buildings = 26 }
				limit = { check_variable = { which = "developpement" value = 260 }}
				add_building = tp_town_4
			}
			
			if = {
				#limit = { num_of_buildings = 30 }
				limit = { check_variable = { which = "developpement" value = 300 }}
				add_building = tp_town_5
			}
		}
	}
}
province_event = {
	id = L3T.1102
	desc = "DESCL3T.1102"
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_economy
	
	ai = no
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = init_population
	}
	#voir pour retourner une estimation textuée plutot que la valeur brute si on l'utilise à d'autres fins que le test/debug
	
	option = {
		name = "OK"	
	}
}
character_event = {
	id = L3T.1104
	desc = "DESCL3T.1104"
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_economy
	
	ai = no
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = init_population
	}
	#voir pour retourner une estimation textuée plutot que la valeur brute si on l'utilise à d'autres fins que le test/debug
	
	option = {
		name = "OK"	
		clear_event_target = holding_dev 
	}
}
character_event = {
	id = L3T.1105
	desc = "DESCL3T.1105"
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_economy
	
	ai = no
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = init_population
	}
	#voir pour retourner une estimation textuée plutot que la valeur brute si on l'utilise à d'autres fins que le test/debug
	
	option = {
		name = "OK"	
		clear_event_target = holding_dev 
	}
}
character_event = {
	id = L3T.1106
	desc = "DESCL3T.1106"
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_economy
	
	ai = no
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = init_population
	}
	#voir pour retourner une estimation textuée plutot que la valeur brute si on l'utilise à d'autres fins que le test/debug
	
	option = {
		name = "OK"	
		clear_event_target = holding_dev 
	}
}
character_event = {
	id = L3T.1107
	desc = "DESCL3T.1107"
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_economy
	
	ai = no
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = init_population
	}
	#voir pour retourner une estimation textuée plutot que la valeur brute si on l'utilise à d'autres fins que le test/debug
	
	option = {
		name = "OK"	
		clear_event_target = holding_dev 
	}
}
character_event = {
	id = L3T.1108
	desc = "DESCL3T.1108"
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_economy
	
	ai = no
	is_triggered_only = yes
	
	trigger = {
		has_global_flag = init_population
	}
	#voir pour retourner une estimation textuée plutot que la valeur brute si on l'utilise à d'autres fins que le test/debug
	
	option = {
		name = "OK"	
		clear_event_target = holding_dev 
	}
}
character_event = {
	id = L3T.1103
	hide_window = yes
	is_triggered_only = yes
	
	trigger = {
		#war = no
		any_demesne_title = {
			tier = baron
			OR = { 
				holding_type = castle
				holding_type = temple
				holding_type = city
			}
		}
	}
	
	immediate = {
		any_demesne_title = {
			limit = { 
				tier = baron
				OR = { 
					holding_type = castle
					holding_type = temple
					holding_type = city
				}
			}
			if = {
				limit = {
					has_siege = no
					is_occupied = no
					location = { has_disease = no }
				}
				save_event_target_as = holding_dev #totoro
				set_variable = { which = "developpementold" which = "developpement" } #copies to the new set variable the value of the 2nd one
				change_variable = { which = "developpement" value = 1 } 
				holder_scope = { character_event = { id = L3T.1104 days = 0 }} #totoro
			}
			if = {
				limit = {
					location = { has_disease = yes }
				}
				save_event_target_as = holding_dev #totoro
				set_variable = { which = "developpementold" which = "developpement" }
				change_variable = { which = "developpement" value = -1 }				
				holder_scope = { character_event = { id = L3T.1105 days = 0 }} #totoro
			}
			if = {
				limit = {
					has_siege = no
					is_occupied = yes
					location = { has_disease = no }
				}
				save_event_target_as = holding_dev #totoro
				set_variable = { which = "developpementold" which = "developpement" }
				#change_variable = { which = "developpement" value = 1 } 
				holder_scope = { character_event = { id = L3T.1106 days = 0 }} #totoro
			}
			if = {
				limit = {
					has_siege = yes
					is_occupied = no
					location = { has_disease = no }
				}
				set_variable = { which = "developpementold" which = "developpement" }
				#change_variable = { which = "developpement" value = 1 } #totoro
				save_event_target_as = holding_dev #totoro
				holder_scope = { character_event = { id = L3T.1107 days = 0 }} #totoro
			}		
		}
	}
#	option = { #totoro
#			trigger = {
#				any_demesne_title = {
#					tier = baron
#					has_title_flag = dev_plus_1 
#				}
#			}
#			random_demesne_title = { 
#				limit = { tier = baron }
#				#if = { 
#					limit = { has_title_flag = dev_plus_1 }
#					change_variable = { which = "developpement" value = 1 }
#					#clr_title_flag = dev_plus_1
#				#}
#			}
#			name = "plus_un"
#		}
#		option = {
#			trigger = {
#				any_demesne_title = {
#					tier = baron
#					has_title_flag =  dev_moins_1 
#				}
#			}
#			random_demesne_title = { 
#				limit = { tier = baron }
#				#if = { 
#					limit = { has_title_flag = dev_moins_1 }
#					change_variable = { which = "developpement" value = -1 }
#					#clr_title_flag = dev_moins_1
#				#}
#			}
#			name = "moins_un"
#		}
}

#Evolution population	CASTLE 
##niveau 1	CASTLE

character_event = {
	#title = "NAMEL3T.101"
    	id = L3T.101
	desc = "DESCL3T.101"
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_economy
	
	only_rulers = yes
	capable_only = yes
	prisoner = no
	is_triggered_only = yes
	
trigger = {
		war = no
		any_demesne_title = {	
			tier = baron	
			holding_type = castle 
			NOT = {	has_building = ca_town_1	}
			#num_of_buildings = 10
			check_variable = { which = "developpement" value = 100 }
		}
	}
		
	#mean_time_to_happen = { months = 18 }

option = {
		name = "OK"	
		random_demesne_title = {	
			limit = {	
				tier = baron	
				holding_type = castle 	
				NOT = {	has_building = ca_town_1	}
				#num_of_buildings = 10
				check_variable = { which = "developpement" value = 100 }
			}
			add_building = ca_town_1
		}
	}
}

##niveau 2	CASTLE
character_event = {
	#title = "NAMEL3T.102"
    	id = L3T.102
	desc = "DESCL3T.102"
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_economy
	
	only_rulers = yes
	capable_only = yes
	prisoner = no
	is_triggered_only = yes
	
trigger = {
		war = no
		any_demesne_title = {	
			tier = baron	
			holding_type = castle 	
			has_building = ca_town_1
			NOT = { has_building = ca_town_2 }
			#num_of_buildings = 15
			check_variable = { which = "developpement" value = 150 }
		}
	}
		
	#mean_time_to_happen = { months = 18 }

option = {
		name = "OK"	
		random_demesne_title = {	
			limit = {	
				tier = baron	
				holding_type = castle 
				#num_of_buildings = 15
				check_variable = { which = "developpement" value = 150 }
				has_building = ca_town_1
				NOT = { has_building = ca_town_2 }
			}
			add_building = ca_town_2
		}
	}
}

##niveau 3	CASTLE
character_event = {
	#title = "NAMEL3T.103"
    	id = L3T.103
	desc = "DESCL3T.103"
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_economy
	
	only_rulers = yes
	capable_only = yes
	prisoner = no
	is_triggered_only = yes
	
trigger = {
		war = no
		any_demesne_title = {	
			tier = baron	
			holding_type = castle 	
			has_building = ca_town_2
			NOT = { has_building = ca_town_3 }
			#num_of_buildings = 20
			check_variable = { which = "developpement" value = 200 }
		}
	}
		
	#mean_time_to_happen = { months = 18 }

option = {
		name = "OK"	
		random_demesne_title = {	
			limit = {	
				tier = baron	
				holding_type = castle 
				#num_of_buildings = 20
				check_variable = { which = "developpement" value = 200 }
				has_building = ca_town_2
				NOT = { has_building = ca_town_3 }
			}
			add_building = ca_town_3
		}
	}
}

##niveau 4	CASTLE
character_event = {
	#title = "NAMEL3T.104"
    	id = L3T.104
	desc = "DESCL3T.104"
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_economy
	
	only_rulers = yes
	capable_only = yes
	prisoner = no
	is_triggered_only = yes
	
trigger = {
		war = no
		any_demesne_title = {	
			tier = baron	
			holding_type = castle 	
			has_building = ca_town_3
			NOT = { has_building = ca_town_4 }
			#num_of_buildings = 25
			check_variable = { which = "developpement" value = 250 }
		}
	}
		
	#mean_time_to_happen = { months = 18 }

option = {
		name = "OK"	
		random_demesne_title = {	
			limit = {	
				tier = baron	
				holding_type = castle 
				#num_of_buildings = 25
				check_variable = { which = "developpement" value = 250 }
				has_building = ca_town_3
				NOT = { has_building = ca_town_4 }
			}
			add_building = ca_town_4
		}
	}
}

##niveau 5	CASTLE
character_event = {
	#title = "NAMEL3T.105"
    	id = L3T.105
	desc = "DESCL3T.105"
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_economy
	
	only_rulers = yes
	capable_only = yes
	prisoner = no
	is_triggered_only = yes

	
trigger = {
		war = no
		primary_title = { higher_tier_than = BARON }
		
		any_demesne_title = {	
			tier = baron	
			holding_type = castle 	
			has_building = ca_town_4
			NOT = { has_building = ca_town_5 }
			#num_of_buildings = 35
			check_variable = { which = "developpement" value = 350 }
		}
	}
		
	#mean_time_to_happen = { months = 18 }

option = {
		name = "OK"	
		random_demesne_title = {	
			limit = {	
				tier = baron	
				holding_type = castle 
				#num_of_buildings = 35
				check_variable = { which = "developpement" value = 350 }
				has_building = ca_town_4
				NOT = { has_building = ca_town_5 }
			}
			add_building = ca_town_5
		}
	}
}


#Evolution population	CITY sligtly faster
##niveau 1	CITY 
character_event = {
	#title = "NAMEL3T.106"
    	id = L3T.106
	desc = "DESCL3T.106"
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_economy
	
	only_rulers = yes
	capable_only = yes
	prisoner = no
	is_triggered_only = yes
	
trigger = {
		war = no
		any_demesne_title = {	
			tier = baron
			holding_type = city		
			NOT = {	has_building = ct_town_1	}
			#num_of_buildings = 10
			check_variable = { which = "developpement" value = 100 }
		}
	}
		
	#mean_time_to_happen = { months = 18 }

option = {
		name = "OK"	
		random_demesne_title = {	
			limit = {	
				tier = baron
				holding_type = city	
				NOT = {	has_building = ct_town_1	}
				#num_of_buildings = 10
				check_variable = { which = "developpement" value = 100 }
			}
			add_building = ct_town_1
		}
	}
}

##niveau 2	CITY 
character_event = {
	#title = "NAMEL3T.107"
    	id = L3T.107
	desc = "DESCL3T.107"
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_economy
	
	only_rulers = yes
	capable_only = yes
	prisoner = no
	is_triggered_only = yes
	
trigger = {
		war = no
		any_demesne_title = {	
			tier = baron
			holding_type = city	
			has_building = ct_town_1
			NOT = { has_building = ct_town_2 }
			#num_of_buildings = 15
			check_variable = { which = "developpement" value = 150 }
		}
	}
		
	#mean_time_to_happen = { months = 18 }

option = {
		name = "OK"	
		random_demesne_title = {	
			limit = {	
				tier = baron
				holding_type = city	
				#num_of_buildings = 15
				check_variable = { which = "developpement" value = 150 }
				has_building = ct_town_1
				NOT = { has_building = ct_town_2 }
			}
			add_building = ct_town_2
		}
	}
}

##niveau 3	CITY 
character_event = {
	#title = "NAMEL3T.108"
    	id = L3T.108
	desc = "DESCL3T.108"
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_economy
	
	only_rulers = yes
	capable_only = yes
	prisoner = no
	is_triggered_only = yes
	
trigger = {
		war = no
		any_demesne_title = {	
			tier = baron
			holding_type = city		
			has_building = ct_town_2
			NOT = { has_building = ct_town_3 }
			#num_of_buildings = 20
			check_variable = { which = "developpement" value = 200 }
		}
	}
		
	#mean_time_to_happen = { months = 18 }

option = {
		name = "OK"	
		random_demesne_title = {	
			limit = {	
				tier = baron
				holding_type = city	
				#num_of_buildings = 20
				check_variable = { which = "developpement" value = 200 }
				has_building = ct_town_2
				NOT = { has_building = ct_town_3 }
			}
			add_building = ct_town_3
		}
	}
}

##niveau 4	CITY 
character_event = {
	#title = "NAMEL3T.109"
    	id = L3T.109
	desc = "DESCL3T.109"
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_economy
	
	only_rulers = yes
	capable_only = yes
	prisoner = no
	is_triggered_only = yes
	
trigger = {
		war = no
		any_demesne_title = {	
			tier = baron
			holding_type = city			
			has_building = ct_town_3
			NOT = { has_building = ct_town_4 }
			#num_of_buildings = 25
			check_variable = { which = "developpement" value = 250 }
		}
	}
		
	#mean_time_to_happen = { months = 18 }

option = {
		name = "OK"	
		random_demesne_title = {	
			limit = {	
				tier = baron
				holding_type = city		
				#num_of_buildings = 25
				check_variable = { which = "developpement" value = 250 }
				has_building = ct_town_3
				NOT = { has_building = ct_town_4 }
			}
			add_building = ct_town_4
		}
	}
}

##niveau 5	CITY 
character_event = {
	#title = "NAMEL3T.110"
    	id = L3T.110
	desc = "DESCL3T.110"
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_economy
	
	only_rulers = yes
	capable_only = yes
	prisoner = no
	is_triggered_only = yes

	
trigger = {
		war = no
		primary_title = { higher_tier_than = BARON }
		
		any_demesne_title = {	
			tier = baron
			holding_type = city		
			has_building = ct_town_4
			NOT = { has_building = ct_town_5 }
			#num_of_buildings = 30
			check_variable = { which = "developpement" value = 300 }
		}
	}
		
	#mean_time_to_happen = { months = 18 }

option = {
		name = "OK"	
		random_demesne_title = {	
			limit = {	
				tier = baron
				holding_type = city	
				#num_of_buildings = 30
				check_variable = { which = "developpement" value = 300 }
				has_building = ct_town_4
				NOT = { has_building = ct_town_5 }
			}
			add_building = ct_town_5
		}
	}
}

#Evolution population	TEMPLE sligtly slower 
##niveau 1	TEMPLE 
character_event = {
	#title = "NAMEL3T.111"
    	id = L3T.111
	desc = "DESCL3T.111"
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_economy
	
	only_rulers = yes
	capable_only = yes
	prisoner = no
	is_triggered_only = yes
	
trigger = {
		war = no
		any_demesne_title = {	
			tier = baron	
			holding_type = temple	
			NOT = {	has_building = tp_town_1	}
			#num_of_buildings = 12
			check_variable = { which = "developpement" value = 120 }
		}
	}
		
	#mean_time_to_happen = { months = 18 }

option = {
		name = "OK"	
		random_demesne_title = {	
			limit = {	
				tier = baron	
				holding_type = temple	
				NOT = {	has_building = tp_town_1	}
				#num_of_buildings = 12
				check_variable = { which = "developpement" value = 120 }
			}
			add_building = tp_town_1
		}
	}
}

##niveau 2	TEMPLE 
character_event = {
	#title = "NAMEL3T.112"
    	id = L3T.112
	desc = "DESCL3T.112"
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_economy
	
	only_rulers = yes
	capable_only = yes
	prisoner = no
	is_triggered_only = yes
	
trigger = {
		war = no
		any_demesne_title = {	
			tier = baron	
			holding_type = temple	
			has_building = tp_town_1
			NOT = { has_building = tp_town_2 }
			#num_of_buildings = 17
			check_variable = { which = "developpement" value = 170 }
		}
	}
		
	#mean_time_to_happen = { months = 18 }

option = {
		name = "OK"	
		random_demesne_title = {	
			limit = {	
				tier = baron	
				holding_type = temple
				#num_of_buildings = 17
				check_variable = { which = "developpement" value = 170 }
				has_building = tp_town_1
				NOT = {	has_building = tp_town_2	}
			}
			add_building = tp_town_2
		}
	}
}

##niveau 3	TEMPLE 
character_event = {
	#title = "NAMEL3T.113"
    	id = L3T.113
	desc = "DESCL3T.113"
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_economy
	
	only_rulers = yes
	capable_only = yes
	prisoner = no
	is_triggered_only = yes
	
trigger = {
		war = no
		any_demesne_title = {	
			tier = baron	
			holding_type = temple	
			has_building = tp_town_2
			NOT = { has_building = tp_town_3 }
			#num_of_buildings = 22
			check_variable = { which = "developpement" value = 220 }
		}
	}
		
	#mean_time_to_happen = { months = 18 }

option = {
		name = "OK"	
		random_demesne_title = {	
			limit = {	
				tier = baron	
				holding_type = temple
				#num_of_buildings = 22
				check_variable = { which = "developpement" value = 220 }
				has_building = tp_town_2
				NOT = {	has_building = tp_town_3	}
			}
			add_building = tp_town_3
		}
	}
}

##niveau 4	TEMPLE 
character_event = {
	#title = "NAMEL3T.114"
    	id = L3T.114
	desc = "DESCL3T.114"
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_economy
	
	only_rulers = yes
	capable_only = yes
	prisoner = no
	is_triggered_only = yes
	
trigger = {
		war = no
		any_demesne_title = {	
			tier = baron	
			holding_type = temple	
			has_building = tp_town_3
			NOT = { has_building = tp_town_4 }
			#num_of_buildings = 26
			check_variable = { which = "developpement" value = 260 }
		}
	}
		
	#mean_time_to_happen = { months = 18 }

option = {
		name = "OK"	
		random_demesne_title = {	
			limit = {	
				tier = baron	
				holding_type = temple
				#num_of_buildings = 26
				check_variable = { which = "developpement" value = 260 }
				has_building = tp_town_3
				NOT = {	has_building = tp_town_4	}
			}
			add_building = tp_town_4
		}
	}
}

##niveau 5	TEMPLE 
character_event = {
	#title = "NAMEL3T.115"
    	id = L3T.115
	desc = "DESCL3T.115"
	picture = GFX_evt_castle_construction
	border = GFX_event_normal_frame_economy
	
	only_rulers = yes
	capable_only = yes
	prisoner = no
	is_triggered_only = yes

	
trigger = {
		war = no
		primary_title = { higher_tier_than = BARON }
		
		any_demesne_title = {	
			tier = baron	
			holding_type = temple	
			has_building = tp_town_4
			NOT = { has_building = tp_town_5 }
			#num_of_buildings = 30
			check_variable = { which = "developpement" value = 300 }
		}
	}
		
	#mean_time_to_happen = { months = 18 }

option = {
		name = "OK"	
		random_demesne_title = {	
			limit = {	
				tier = baron	
				holding_type = temple
				#num_of_buildings = 30
				check_variable = { which = "developpement" value = 300 }
				has_building = tp_town_4
				NOT = {	has_building = tp_town_5	}
			}
			add_building = tp_town_5
		}
	}
}