#################################
#         L3T  par Arko         #
#################################


namespace = L3T


## décider de l'avenir d'un domaine 

#Domaine Féodal     
narrative_event = {
	title = "NAMEL3T.3"
    id = L3T.3
	desc = "DESCL3T.3"
	picture = GFX_evt_castle_construction
	
	only_rulers = yes
	capable_only = yes
	prisoner = no
		
	trigger = {
		OR = {
			had_global_flag = { flag = SWMH days = 30 }			
			had_global_flag = { flag = running_VANILLA days = 30 }
			had_global_flag = { flag = running_LCDA days = 30 }
		}
		#NOT = { trait = chef_malandrin }
		any_demesne_title = {
			tier = baron
			holding_type = castle 
			NOT = {
				#has_building = REPAIREVOLEUR
				has_building = FEODAL_mil
				has_building = FEODAL_prod
				has_building = FEODAL_adm
			}
		}
	}	
		
	mean_time_to_happen = {
		months = 9
		modifier = {
			factor = 0.5
			OR = {
				had_global_flag = { flag = SWMH days = 360 }			
				had_global_flag = { flag = running_VANILLA days = 360 }
				had_global_flag = { flag = running_LCDA days = 360 }
			}
		}
	}

	immediate = {
		random_demesne_title = {
			limit = {
				tier = baron
				holding_type = castle
				NOT = {
					#has_building = REPAIREVOLEUR
					has_building = FEODAL_mil
					has_building = FEODAL_prod
					has_building = FEODAL_adm
				}
			}
			set_title_flag = castle_to_specialize
			#set_variable = { which = "specNB" value = 0 } #debug
		}
	}
	
	option = {
		name = "L3T.3A"	#MIL
		ai_chance = {
			factor = 50
			modifier = {
				factor = 3
				any_demesne_title = {
					has_title_flag = castle_to_specialize
					location = { NOT = { check_variable = { which = "resourceNb" value = 2 } } }
				}
			}
			modifier = {
				factor = 0.1
				capital_holding = {
					has_title_flag = castle_to_specialize
				}
			}
			#modifier = { factor = 2	holy_order = yes }
		}
		trigger = {
			any_demesne_title = {
				has_title_flag = castle_to_specialize
			}
		}
		random_demesne_title = {
			limit = {
				has_title_flag = castle_to_specialize
			}
			add_building = FEODAL_mil
			#change_variable = { which = "specNB" value = 1 } #debug
			add_holding_modifier = { name = feodal_mil duration = -1 }	
			clr_title_flag = castle_to_specialize
		}
	}
	
	option = {
		name = "L3T.3B"	#ECO
		trigger = { holy_order = no }
		ai_chance = { 
			factor = 50
			modifier = {
				factor = 3
				any_demesne_title = {
					has_title_flag = castle_to_specialize
					location = { check_variable = { which = "resourceNb" value = 2 } }
				}
			}
			modifier = {
				factor = 0.1
				capital_holding = {
					has_title_flag = castle_to_specialize
				}
			}
			modifier = {
				factor = 1.5
				any_demesne_title = {
					has_title_flag = castle_to_specialize
					location = { has_province_flag = crown_focus_province } #pondération capitale économique
				}
			}
			modifier = { factor = 0.5	holy_order = yes }
		}
		random_demesne_title = {
			limit = {
				has_title_flag = castle_to_specialize
			}
			add_building = FEODAL_prod
			#change_variable = { which = "specNB" value = 1 } #debug
			add_holding_modifier = { name = feodal_prod duration = -1 }
			clr_title_flag = castle_to_specialize
		}
	}

	option = {
		name = "L3T.3C" #ADM
		trigger = {
			capital_holding = {
					has_title_flag = castle_to_specialize
			}
			OR = {
				higher_tier_than = COUNT # Duke, King or Emperor
				num_of_count_titles = 2
			}
			holy_order = no
		}
		ai_chance = {
			factor = 50		
			modifier = {
				factor =  10
				higher_tier_than = DUKE # King or Emperor
			}
			modifier = { factor = 1.2	num_of_count_titles = 2 }
			modifier = { factor = 1.2	num_of_count_titles = 3 }
			modifier = { factor = 1.1	num_of_count_titles = 4 }
			modifier = {
				factor =  10
				independent = yes
			}
		}
		capital_holding = {
			add_building = FEODAL_adm
			#change_variable = { which = "specNB" value = 1 } #debug
			add_holding_modifier = { name = feodal_adm duration = -1 }
			clr_title_flag = castle_to_specialize
		}
	}
}

#Domaine Communal     
narrative_event = {
	title = "NAMEL3T.4"
	id = L3T.4
	desc = "DESCL3T.4"
	picture = GFX_evt_L3T_city
	
	only_rulers = yes
	capable_only = yes
	prisoner = no
		
	trigger = {
		OR = {
			had_global_flag = { flag = SWMH days = 360 }			
			had_global_flag = { flag = running_VANILLA days = 360 }
			had_global_flag = { flag = running_LCDA days = 360 }
			AND = { # Priorité aux républiques
				is_republic = yes
				NOT = { tier = baron }
				OR = {
					had_global_flag = { flag = SWMH days = 60 }				
					had_global_flag = { flag = running_VANILLA days = 60 }
					had_global_flag = { flag = running_LCDA days = 60 }
				}
			}
		}
		any_demesne_title = {
			tier = baron
			holding_type = city
			NOT = {
				has_building = CITE_L1
				has_building = CITE_L2
				has_building = VOC_INDUSTRIELLE
				has_building = VOC_COMMERCIALE
			}
		}
	}	
		
	mean_time_to_happen = {
		months = 9
		modifier = { factor = 0.1	NOT = { tier = baron }	}
		modifier = {
			factor = 0.5
			OR = {
				had_global_flag = { flag = SWMH days = 720 }			
				had_global_flag = { flag = running_VANILLA days = 720 }
				had_global_flag = { flag = running_LCDA days = 720 }
			}
		}
	}

	immediate = {
		random_demesne_title = {
			limit = {
				tier = baron
				holding_type = city
				NOT = {
					has_building = CITE_L1
					has_building = CITE_L2
					has_building = VOC_INDUSTRIELLE
					has_building = VOC_COMMERCIALE
				}
			}
			set_title_flag = city_to_specialize
			#set_variable = { which = "specNB" value = 0 } #debug
		}
	}
	
	option = {
		name = "L3T.4A"	
		ai_chance = { 
			factor = 50			
			modifier = {
				factor = 3
				any_demesne_title = {
					has_title_flag = city_to_specialize
					location = { is_variable_equal = { which = "resourceNb" value = 2 } }
				}
			}
			modifier = {
				factor = 0.1
				any_demesne_title = {
					has_title_flag = city_to_specialize
					location = { is_variable_equal = { which = "resourceNb" value = 1 } }
				}
			}
		}	
		random_demesne_title = {
			limit = {
				has_title_flag = city_to_specialize
			}
			add_building = CITE_L1
			add_building = VOC_INDUSTRIELLE
			#change_variable = { which = "specNB" value = 1 } #debug
			add_holding_modifier = { name = voc_indus duration = -1 }
			clr_title_flag = city_to_specialize
		}
	}
	
	option = {
		name = "L3T.4B"
		trigger = {
			any_demesne_title = {
				has_title_flag = city_to_specialize
				
				# Pas de cité commerçante dans la province et les provinces voisines
				location = {
					NOT = {
						any_province_holding = {
							tier = baron
							holding_type = city
							has_building = VOC_COMMERCIALE
						}
						any_neighbor_province = {
							OR = {
								has_province_flag = neighbor_bloc_A
								has_province_flag = neighbor_neighbor_bloc_A
							}
						}
					}
				}				
			}
		}
		ai_chance = {
			factor = 10
			modifier = { factor = 100	NOT = { tier = baron }	}
			modifier = { factor = 0.7	tier = baron }
			modifier = {
				factor = 0.1
				any_demesne_title = {
					has_title_flag = city_to_specialize
					location = { is_variable_equal = { which = "resourceNb" value = 3 } }
				}
			}
		}
		random_demesne_title = {
			limit = {
				tier = baron
				holding_type = city
				NOT = {
					has_building = CITE_L1
					has_building = CITE_L2
					has_building = VOC_INDUSTRIELLE
					has_building = VOC_COMMERCIALE
				}
				# Pas de cité commerçante dans la province et les provinces voisines
				location = {
					NOT = {
						any_province_holding = {
							tier = baron
							holding_type = city
							has_building = VOC_COMMERCIALE
						}
						any_neighbor_province = {
							OR = {
								has_province_flag = neighbor_bloc_A
								has_province_flag = neighbor_neighbor_bloc_A
							}
						}
					}
				}
			}
			add_building = CITE_L1
			add_building = VOC_COMMERCIALE
			#change_variable = { which = "specNB" value = 1 } #debug
			add_holding_modifier = { name = voc_comm duration = -1 }
			# La province devient le départ d'une route	si possible
			location = {
				if = {
					limit = {
						NOT = {
							# N'est pas déjà prévu pour être sur une route
							has_province_flag = bloc_A
							has_province_flag = bloc_B
							has_province_flag = bloc_C
							has_province_flag = bloc_D
							has_province_flag = bloc_E	
							
							# N'a pas déjà des voisins prévus pour être sur une route de manière incompatible
							any_neighbor_province = {
								has_province_flag = bloc_A
								has_province_flag = bloc_C
								has_province_flag = bloc_D
								has_province_flag = bloc_E
							}
						}
					}				
					set_province_flag = bloc_A
					add_province_modifier = { name = noeud_commercial_primaire duration = -1 }
					
					# Marque les voisins et voisins de voisins pour faire une distance entre les blocs A
					any_neighbor_province = {
						set_province_flag = neighbor_bloc_A
						any_neighbor_province = {
							limit = {
								NOT = {
									has_province_flag = neighbor_bloc_A									
									has_province_flag = neighbor_neighbor_bloc_A
									has_province_flag = bloc_A
								}
							}
							set_province_flag = neighbor_neighbor_bloc_A
						}
					}
					
					add_province_modifier = { name = route_size1 duration = -1 }
					set_variable = { which = "route_size" value = 1 }
					if = {
						limit = { has_province_modifier = province_fleuve }
						add_province_modifier = { name = route_fluviale duration = -1 hidden = yes }
					}
					if = {
						limit = { NOT = { has_province_modifier = province_fleuve } }
						add_province_modifier = { name = route_terrestre duration = -1 hidden = yes }
					}
					# Avert the player that a route is on its demesne
					any_province_lord = {
						limit = {
							ai = no
							NOT = { has_global_flag = avert_player } # assure that the player is averted only once
						}
						set_global_flag = avert_player
						narrative_event = { id = L3TRADE.10 days = 10}
					}
						
					# Avert the player that the route building can be build on its demesne
					any_neighbor_province = {
						any_province_lord = {
							limit = {
								ai = no
								NOT = { has_global_flag = avert_player }
							}
							set_global_flag = avert_player
							character_event = { id = L3TRADE.9 days = 10}
						}
					}
					clr_global_flag = avert_player
				}
			}
			clr_title_flag = city_to_specialize	
		}
	}
}

#domaine Communal province à double cité  
province_event = {
    id = L3T.41
	hide_window = yes
	
	is_triggered_only = yes
	
	immediate = {
		# Une cité sera commerçante
		random_province_holding = {
			limit = {
				tier = baron
				holding_type = city
				NOT = {
					has_building = CITE_L1
					has_building = VOC_INDUSTRIELLE
					has_building = VOC_COMMERCIALE
				}
			}
			add_building = CITE_L1
			add_building = VOC_COMMERCIALE
			#change_variable = { which = "specNB" value = 1 } #debug
			add_holding_modifier = { name = voc_comm duration = -1 }
			
			# La province devient le départ d'une route si elle est distance au moins 3 d'un autre
			if =  {
				limit = {
					location = {
						NOT = {
							any_neighbor_province = {
								OR = {
									has_province_flag = bloc_A
									has_province_flag = neighbor_bloc_A
									has_province_flag = neighbor_neighbor_bloc_A
								}
							}
						}
					}
				}
				location = {
					set_province_flag = bloc_A
					any_neighbor_province = {
						set_province_flag = neighbor_bloc_A
						any_neighbor_province = {
							limit = {
								NOT = {
									has_province_flag = neighbor_bloc_A									
									has_province_flag = neighbor_neighbor_bloc_A
									has_province_flag = bloc_A
								}
							}
							set_province_flag = neighbor_neighbor_bloc_A
						}
					}
					add_province_modifier = { name = route_size1 duration = -1 }
					add_province_modifier = { name = noeud_commercial_primaire duration = -1 }
					set_variable = { which = "route_size" value = 1 }
					if = {
						limit = { has_province_modifier = province_fleuve }
						add_province_modifier = { name = route_fluviale duration = -1 hidden = yes}
					}
					if = {
						limit = { NOT = { has_province_modifier = province_fleuve } }
						add_province_modifier = { name = route_terrestre duration = -1 hidden = yes}
					}
					# Avert the player that a route is on its demesne
					any_province_lord = {
						limit = {
							ai = no
							NOT = { has_global_flag = avert_player } # assure that the player is averted only once
						}
						set_global_flag = avert_player
						narrative_event = { id = L3TRADE.10 days = 10}
					}	
					
					# Avert the player that the route building can be build on its demesne
					any_neighbor_province = {
						any_province_lord = {
							limit = {
								ai = no
								NOT = { has_global_flag = avert_player }
							}
							set_global_flag = avert_player
							character_event = { id = L3TRADE.9 days = 10}
						}
					}
					clr_global_flag = avert_player
				}
			}
		}
		
		# Les autres productrices
		any_province_holding = {
			if = {
				limit = {
					tier = baron
					holding_type = city
					NOT = { has_building = VOC_COMMERCIALE }
				}
				add_building = CITE_L1
				add_building = VOC_INDUSTRIELLE
				#change_variable = { which = "specNB" value = 1 } #debug
				add_holding_modifier = { name = voc_indus duration = -1 }
			}
		}
	}
}

#upgrade CITE L1 vers L2
narrative_event = {
	title = "NAMEL3T.5"
	desc = "DESCL3T.5"
    id = L3T.5
	picture = GFX_evt_L3T_city
	
	only_rulers = yes
	capable_only = yes
	#prisoner = no
	
	trigger = {
		#OR = { #dealt through gov_type instead of religion
		#   NOT = { religion_group = pagan_group }
		#   religion = west_african_pagan
		#   religion = west_african_pagan_reformed
		#}
		any_demesne_title = {
			tier = baron
			holding_type = city
			num_of_buildings = 25 #à changer une fois testé
			has_building = CITE_L1
			
			NOT = { has_building = CITE_L2 }
		}
	}	
		
	mean_time_to_happen = { days = 450 }	

	option = {
		name = "L3T.5A"	
		random_demesne_title = {
			limit = {
				tier = baron
				holding_type = city
				num_of_buildings = 25 #à changer une fois testé -25-
				NOT = { has_building = CITE_L2 }
			}
			add_building = CITE_L2
		}
	}
}

#upgrade CITE L2 vers L3
narrative_event = {
	title = "NAMEL3T.2"
	desc = "DESCL3T.2"
    id = L3T.2
	picture = GFX_evt_L3T_city
	
	only_rulers = yes
	capable_only = yes
	#prisoner = no
		
	trigger = {
		OR = {
		   NOT = { religion_group = pagan_group }
		   religion = west_african_pagan
		   religion = west_african_pagan_reformed
		}
		any_demesne_title = {
			tier = baron
			holding_type = city
			num_of_buildings = 45 #à changer une fois testé
			has_building = CITE_L2
			
			NOT = { has_building = CITE_L3 }
		}
	}	
		
	mean_time_to_happen = { days = 450 }	

	option = {
		name = "L3T.2A"	
		random_demesne_title = {
			limit = {
				tier = baron
				holding_type = city
				num_of_buildings = 45 #à changer une fois testé -25-
				NOT = { has_building = CITE_L3 }
			}
			add_building = CITE_L3
		}
	}
}


#Domaine Ecclésial     
narrative_event = {
    id = L3T.6
	picture = GFX_evt_monk
	border = GFX_event_narrative_frame_religion
	#desc = "DESCL3T.6" #ne mettre que si tous les cas ne sont pas couverts par les triggers 
	
	title = { 
		trigger = {	NOT = { religion_group = muslim } }
		text = "NAMEL3T.6"
	}
	title = { 
		trigger = {	religion_group = muslim	}
		text = "NAMEL3T.6"
	}
	
	desc = { 
		trigger = {	NOT = {	religion_group = muslim	} }
		text = "DESCL3T.6"
		picture = GFX_evt_monk
	}
	
	desc = { 
		trigger = {	religion_group = muslim	}
		text = "DESCL3T.6"
		picture = GFX_evt_L3T_muslim_blue_dome
	}
	
	only_rulers = yes
	capable_only = yes
	prisoner = no
		
	trigger = {		
		OR = {
			had_global_flag = { flag = SWMH days = 30 }			
			had_global_flag = { flag = running_VANILLA days = 30 }
			had_global_flag = { flag = running_LCDA days = 30 }
		}		
		any_demesne_title = {
			tier = baron
			holding_type = temple
			location = { NOT = { religion_group = pagan_group } }
			NOT = { has_title_flag = temple_to_specialize }
			NOT = {
				has_building = MONASTERE
				has_building = CITEEPISCOPALE
			}
		}
	}	

	mean_time_to_happen = {
		months = 9 
		modifier = {
			factor = 0.7
			OR = {
				had_global_flag = { flag = SWMH days = 360 }			
				had_global_flag = { flag = running_VANILLA days = 360 }
				had_global_flag = { flag = running_LCDA days = 360 }
			}
		}
	}
	
	immediate = {
		random_demesne_title = {
			limit = {
				tier = baron
				holding_type = temple
				location = { NOT = { religion_group = pagan_group } }
				NOT = {
					has_building = MONASTERE
					has_building = CITEEPISCOPALE
				}
			}
			set_title_flag = temple_to_specialize
			set_variable = { which = "specNB" value = 0 } #debug
		}
	}
	
	option = {
		name = "L3T.6A"	
		ai_chance = {
			factor = 40
			modifier = { factor =  5	learning = 20	}
			modifier = { factor =   2	learning = 15	}
			modifier = { factor = 0.75	NOT = { learning = 10 }	}
			modifier = { factor = 1.25	NOT = { tier = count } }
			modifier = {
				factor = 3
				any_demesne_title = {
					has_title_flag = temple_to_specialize
					location = { check_variable = { which = "resourceNb" value = 2 } }
				}
			}
		}
		trigger = {
			any_demesne_title = {
				location = { religion_group = christian }
				has_title_flag = temple_to_specialize
			}
		}
		random_demesne_title = {
			limit = {
				location = { religion_group = christian }
				has_title_flag = temple_to_specialize
			}
			if = {
				limit = {
					NOT = {
						has_building = MONASTERE
						has_building = CITEEPISCOPALE
					}
				}
				add_building = MONASTERE
				add_holding_modifier = { name = monastere duration = -1 }
				hidden_tooltip = { change_variable = { which = "specNB" value = 1 }} #debug
			}
		}
		set_character_flag = canGetEasterEgg3
	}
	
	option = {
		name = "L3T.6B"	
		ai_chance = {
			factor = 40
			#modifier = { factor = 0	holy_order = yes }
			modifier = { factor = 5	tier = count }
			modifier = { factor = 2	tier = duke }
			modifier = { factor =  0.9	NOT = { learning = 15 } }
			modifier = { factor = 0.75	NOT = { tier = count } }
		}
		trigger = {
			any_demesne_title = {
				location = { NOT = { religion_group = pagan_group } }
				has_title_flag = temple_to_specialize
			}
		}
		random_demesne_title = {
			limit = {
				location = { NOT = { religion_group = pagan_group } }
				has_title_flag = temple_to_specialize
			}
			if = {
				limit = {
					NOT = {
						has_building = MONASTERE
						has_building = CITEEPISCOPALE
					}
				}
				add_building = CITEEPISCOPALE
				if = {
					limit = { location = { religion_group = christian }} #//christian specific icon
					add_holding_modifier = { name = episcopale duration = -1 }
					}
				if = {
					limit = { location = { religion_group = muslim }} #//muslim specific icon
					add_holding_modifier = { name = episco_muslim duration = -1 }
					}
				if = {
					limit = { #other non pagan religions //jewish, zoro, indian
						location = { NOT = {religion_group = christian }}
						location = { NOT = {religion_group = muslim }}
						}
						add_holding_modifier = { name = episcopale duration = -1 
						hidden = yes
						}
					}
				hidden_tooltip = { change_variable = { which = "specNB" value = 1 }} #debug			
			}
		}
	}

#	option = {
#		name = "L3T.6C"	
#		ai_chance = {
#			factor = 20
#			#modifier = { factor = 20	holy_order = yes }
#			modifier = { factor = 0.5 	any_demesne_title = { location = { NOT = { religion = catholic }}}}
#			modifier = { factor = 2.5	martial = 20 }
#			modifier = { factor = 1.5	martial = 15 }
#			modifier = { factor = 0.5	NOT = { martial = 10 } }
#		}
#		trigger = {
#			any_demesne_title = {
#				location = { religion_group = christian }
#				has_title_flag = temple_to_specialize
#			}
#		}
#		random_demesne_title = {
#			limit = {
#				location = { religion_group = christian }
#				has_title_flag = temple_to_specialize
#			}
#			add_building = MONASTERE
#			add_holding_modifier = { name = commanderie duration = -1 }
#			add_building = COMMANDERIE
#			random = {
#				chance = 20
#				add_building = COMMANDERIE_L2
#			}			
#		}
#	}

}

#Attribution règle
narrative_event = {
	title = "NAMEL3T.7"
    id = L3T.7
	desc = "DESCL3T.7"
	picture = GFX_evt_monk
	
	only_rulers = yes
	capable_only = yes
	prisoner = no
		
	trigger = {
		any_demesne_title = {
			location = {
				OR = {
					religion = catholic
					is_heresy_of = catholic
					religion = orthodox
					is_heresy_of = orthodox
				}
			}
			tier = baron
			holding_type = temple
			has_building = MONASTERE
			NOT = {
				has_building = REGLE_DE_1
				has_building = REGLE_DE_2				
				has_building = REGLE_DE_3
			}
		}
	}
		
	mean_time_to_happen = { months = 9 }	

	#Regula Benedicti
	option = {
		name = "L3T.7A"	
		trigger = {
			any_demesne_title = {
				location = {
					OR = {
					religion = catholic
					is_heresy_of = catholic
					}
				}
			}
		}
		random_demesne_title = {
			limit = {
				tier = baron
				holding_type = temple
				has_building = MONASTERE
				NOT = {
					has_building = REGLE_DE_1
					has_building = REGLE_DE_2				
					has_building = REGLE_DE_3
				}
			}
			add_building = REGLE_DE_1
		}
	}
	#Regula Augustini
	option = {
		name = "L3T.7B"	
		trigger = {
			any_demesne_title = {
				location = {
					OR = {
					religion = catholic
					is_heresy_of = catholic
					}
				}
			}
		}
		random_demesne_title = {
			limit = {
				tier = baron
				holding_type = temple
				has_building = MONASTERE
				NOT = {
					has_building = REGLE_DE_1
					has_building = REGLE_DE_2				
					has_building = REGLE_DE_3
				}
			}
			add_building = REGLE_DE_2
		}
	}
	#Regula Basili
	option = {
		name = "L3T.7C"	
		trigger = {
			any_demesne_title = {
				location = {
					OR = {
					religion = orthodox
					is_heresy_of = orthodox
					}
				}
			}
		}
		random_demesne_title = {
			limit = {
				tier = baron
				holding_type = temple
				has_building = MONASTERE
				NOT = {
					has_building = REGLE_DE_1
					has_building = REGLE_DE_2				
					has_building = REGLE_DE_3
				}
			}
			add_building = REGLE_DE_3 #saint-Basile 
		}
	}
}

#attribution ordre (militaire)
# character_event = {
    # id = L3T.0008
	# desc = "DESCL3T.0008"
	# picture = GFX_evt_monk
	
	# only_rulers = yes
	# capable_only = yes
	# prisoner = no
		
	# trigger = {
		# any_demesne_title = {
			# tier = baron
			# holding_type = temple
			# has_building = COMMANDERIE
			# num_of_buildings = 100 #fic
			# NOT = {
				# has_building = ORDRE_MILIT_1
				# has_building = ORDRE_MILIT_2				
				# has_building = ORDRE_MILIT_3
			# }
		# }
	# }
		
	# mean_time_to_happen = { months = 30 }	
	        
	# option = { #ajouter prérequis existence des ordres.
		# name = "L3T.0008A"	
		# trigger = { ai=no }
		# random_demesne_title = {
			# limit = {
				# tier = baron
				# holding_type = temple
				# has_building = COMMANDERIE
				# num_of_buildings = 100 #fic
				# NOT = {
					# has_building = ORDRE_MILIT_1
					# has_building = ORDRE_MILIT_2				
					# has_building = ORDRE_MILIT_3
				# }
			# }
			# add_building = ORDRE_MILIT_1
		# }
	# }
	
	# option = {
		# name = "L3T.0008B"	
		# trigger = { ai=no }
		# random_demesne_title = {
			# limit = {
				# tier = baron
				# holding_type = temple
				# has_building = COMMANDERIE
				# num_of_buildings = 100 #fic
				# NOT = {
					# has_building = ORDRE_MILIT_1
					# has_building = ORDRE_MILIT_2				
					# has_building = ORDRE_MILIT_3
				# }
			# }
			# add_building = ORDRE_MILIT_2
		# }
	# }

	# option = {
		# name = "L3T.0008C"	
		# trigger = { ai=no }
		# random_demesne_title = {
			# limit = {
				# tier = baron
				# holding_type = temple
				# has_building = COMMANDERIE
				# num_of_buildings = 100 #fic
				# NOT = {
					# has_building = ORDRE_MILIT_1
					# has_building = ORDRE_MILIT_2				
					# has_building = ORDRE_MILIT_3
				# }
			# }
			# add_building = ORDRE_MILIT_3
		# }
	# }

	# option = {
		# name = "L3T.0008C"	
		# trigger = { ai=yes }
		# random_demesne_title = {
			# limit = {
				# tier = baron
				# holding_type = temple
				# has_building = COMMANDERIE
				# num_of_buildings = 100 #fic
				# NOT = {
					# has_building = ORDRE_MILIT_1
					# has_building = ORDRE_MILIT_2				
					# has_building = ORDRE_MILIT_3
				# }
			# }
			# random_list = {
				# 3 = { add_building = ORDRE_MILIT_1 }
				# 3 = { add_building = ORDRE_MILIT_2 }
				# 3 = { add_building = ORDRE_MILIT_3 }
			# }
		# }
	# }
# }

# Init built holding (on_action)
# ROOT = Builder, FROM = Title
character_event = {
	id = L3T.9
	hide_window = yes
	is_triggered_only = yes 
	
	immediate = {
		if = {
			limit = { FROM = { holding_type = castle } }
			narrative_event = { id = L3T.3 days = 1 }
		}
		if = {
			limit = { FROM = { holding_type = city } }
			narrative_event = { id = L3T.4 days = 1 }
		}
		if = {
			limit = { FROM = { holding_type = temple } }
			narrative_event = { id = L3T.6 days = 1 }
		}
	}
}

#event SoA
#character_event = {
#	id = L3T.13
#	desc = DESCL3T.13
#	picture = GFX_evt_castle_construction
#	border = GFX_event_normal_frame_religion
#	#hide_window = yes
#	
#	is_triggered_only = yes 
##not called	#triggered from LCDA's soa_holy_order_event
#	#SoA.1024 # The Knights Templar loan
#	#SoA.1054 # The Knights Templar humble request
#	#SoA.1154 #The Knights of St Jean / the Hospitallers humble request
#	#SoA.1354 # The Teutonic Order humble request
#	#SoA.1654 # The Brotherhood of the Holy Sepulchre  humble request
#	#SoA.2654 # The Order of Santiago
#	#SoA.2754 # The Order of Calatrava
#	
#	trigger = {
#		any_demesne_title = {
#				holding_type = temple
#				tier = baron
#				NOT = { num_of_buildings = 1 }
#					NOT = {
#						has_building = MONASTERE
#						has_building = COMMANDERIE
#						has_building = CITEEPISCOPALE
#					}
#				NOT = { has_title_flag = future_commanderie }
#		}
#	}
#
#	immediate = { 
#		random_demesne_title = {
#			limit = {
#				NOT = { has_title_flag = future_commanderie }
#				holding_type = temple
#				tier = baron
#				NOT = {
#					has_building = MONASTERE
#					has_building = COMMANDERIE
#					has_building = CITEEPISCOPALE
#				}				
#			}
#			set_title_flag = future_commanderie
#			add_holding_modifier = { name = commanderie duration = -1 }
#		}
#	}
#		
#	option = {
#		name = L3T.13A
#		custom_tooltip = { text = construction_commanderie } # ++++le modifier de holding qui va bien
#			hidden_tooltip = {
#				random_demesne_title = {
#					limit = {
#						holding_type = temple
#						tier = baron
#						has_title_flag = future_commanderie
#							NOT = {
#								has_building = MONASTERE
#								has_building = COMMANDERIE
#							}
#					}
#					add_building = MONASTERE
#					add_building = COMMANDERIE
#					random = {
#						chance = 40
#						add_building = COMMANDERIE_L2
#					}
#					clr_title_flag = future_commanderie
#				}
#				set_character_flag = canGetEasterEgg3
#			}
#	}
#}
