# WARNING: scripted triggers are not functions in the programming langages
# 		   they are only macro: a way to avoid copy/paste
#		   In particular take attention of:
#				- The scopes
#				- The OR blocs


###RESSOURCES
vigne_dispo = {
	custom_tooltip = { text = vigne_dispo }
	OR = {
		has_province_modifier = agriculture2_vigne_trade
		FROMFROM = { has_holding_modifier = agriculture2_vigne }
	}
}
orge_dispo = {
	custom_tooltip = { text = orge_dispo }
	OR = {
		has_province_modifier = agriculture2_cereales_trade
		FROMFROM = { has_holding_modifier = agriculture2_cereales }
	}
}
ressource_L2_dispo = {
	custom_tooltip = { text = ressource_L2_dispo }
	FROMFROM = { 
		OR = {		
			has_holding_modifier = agriculture2_cereales
			has_holding_modifier = agriculture2_vigne
			has_holding_modifier = agriculture3_farine
			has_holding_modifier = agriculture3_vin
			has_holding_modifier = agriculture3_biere
			has_holding_modifier = nourriture_1
			##### !!! à compléter
		}
	}
}


###REGIONS
region_vitis_vinifera = {
	OR = {
		AND = { #LCDA map
			has_global_flag = running_LCDA
			region = world_alps
		}
		AND = { #SWMH+vanilla map
			NOT = { has_global_flag = running_LCDA }
			OR = {
				region = world_europe_west_francia
				region = world_europe_west_iberia
				region = world_europe_south_east #world_europe_south
				region = world_europe_south_italy #world_europe_south
				region = world_asia_minor
				region = world_middle_east_jerusalem
				region = world_persia
				region = world_africa_north
			}
		}
	}
}

is_active_fonderie_by_neighbor = {
	AND = { # Use AND because it will be use in a OR bloc
		OR = {
			has_province_modifier = route_fluviale
			has_province_modifier = route_terrestre
		}
		any_neighbor_province = {
			has_province_modifier = minerai2_fer
			NOT = { has_province_modifier = mine_stop }
			OR = {
				has_province_modifier = route_fluviale
				has_province_modifier = route_terrestre
			}					
		}
	}
}

is_active_fonderie = {
	OR = {
		AND = {
			has_province_modifier = minerai2_fer
			NOT = { has_province_modifier = mine_stop }
		}
		custom_tooltip = {
			text = TOOLTIP_is_active_fonderie_by_neighbor
			is_active_fonderie_by_neighbor = yes
		}
	}
}

is_active_outil_ou_armes_neighbor = {
	AND = { # Use AND because it will be use in a OR bloc
		OR = {
			has_province_modifier = route_fluviale
			has_province_modifier = route_terrestre
		}
		any_neighbor_province = {
			has_province_modifier = minerai3_metal
			is_active_fonderie = yes
			OR = {
				has_province_modifier = route_fluviale
				has_province_modifier = route_terrestre
			}					
		}
	}
}

is_active_outil_ou_armes = {
	OR = {
		AND = {
			has_province_modifier = minerai3_metal
			custom_tooltip = {
				text = TOOLTIP_is_active_fonderie
				is_active_fonderie = yes
			}
		}
		custom_tooltip = {
			text = TOOLTIP_is_active_outil_ou_armes_neighbor
			is_active_outil_ou_armes_neighbor = yes
		}
	}
}

#has_all_books/thematics
has_all_books_religious = {
	AND = { 
		has_artifact = book_A
		has_artifact = book_B
		has_artifact = book_S
	}
}
has_all_books_science = {
	AND = {
		has_artifact = book_C
		has_artifact = book_D
		has_artifact = book_E
		has_artifact = book_F
	}
}
has_all_books_litteracy = {
	AND = {
		has_artifact = book_G
		has_artifact = book_H
		has_artifact = book_I
		has_artifact = book_J
	}
}
has_all_books_economy = {
	AND = {
		has_artifact = book_K
		has_artifact = book_L
		has_artifact = book_M
	}
}

#has_all_books/vendor types
has_all_books_from_local_merchant = {
	AND = { 
		has_all_books_religious = yes
		has_all_books_litteracy = yes		
	}
}
has_all_books_from_scholar = {
	AND = { 
		has_all_books_science = yes
		has_all_books_litteracy = yes
		has_all_books_economy = yes
	}
}
has_all_books_from_monastery = {
	AND = {
		has_all_books_religious = yes
		has_all_books_science = yes
	}
}
has_all_books_from_foreign_merchant = {
	AND = { 
		has_all_books_science = yes
		has_all_books_litteracy = yes
		has_all_books_economy = yes
	}
}

not_involved_in_personnal_war = {
	custom_tooltip = { text = not_involved_in_personnal_war }
	hidden_tooltip = {		
		OR = {
			is_primary_war_attacker = no
			is_primary_war_defender = no
		}
	}
}